[{"section_title": "Abstract", "text": "Abstract-In this paper we adressed the effects of flexibilities and liquid fuel sloshing on the on-orbit robotics-based dynamic parameter identification. For modelling the liquid fuel sloshing we combined the general free-floating robot dynamics with a mechanical pendulum equivalent model. For the dynamic parameter identification we extended our identification algorithm for rigid body systems to account for these two effects. The flexible and sloshing modes are excited only with the manipulator executing optimized trajectories. For the identification algorithm we make use of the robotic joint position and torque sensor data as well as of on board GNC sensor data. Numerical simulations showed that the two effects can have significant influence to the free-floating dynamics. Furthermore, we showed that the extended parameter identification algorithm improves the accuracy of the dynamic model."}, {"section_title": "I. INTRODUCTION", "text": ""}, {"section_title": "A. Motivation", "text": "Future on-orbit servicing (OOS) applications for freeflying robots will involve complex tasks which require high system performance like reliability, efficiency and safety, either in full or shared autonomy or in tele-operation.\nThe majority of both servicer systems and client satellites are equipped with flexible appendages like solar panels, antennas or certain flexible instruments. Furthermore OOS systems will have fuel tanks on board in order to control attitude and orbit. During an OOS mission the servicer system will make among other tasks fly arounds, far and close approach maneuvers, grasping the target (a so-called client), stabilize, repairing tasks and deorbit the whole system. These tasks will consume fuel and will excite flexible and fuel sloshing modes either on the servicer and/or the client. The OOS system must be able to cope with these conditions to ensure the required safety and high performance. To improve path planning and tracking capabilities as well as efficiency in energy consumption by reducing the control effort, the dynamic model must be known to a sufficient accuracy.\nNormally, the manipulator properties stay constant in space, but due to fuel consumption the parameters of the satellite base will change significantly. Especially the fill level has a clear effect to the ratio of fixed fuel mass and slosh fuel mass. The smaller the fill level, the higher the influence of the sloshing mass compared to the fixed fuel mass (see [1] ). For an OOS mission this means an increasing sloshing effect towards the end of the mission.\nFor this reasons, a parameter identification method is indispensable to obtain the inertial parameters like mass, center of mass and moments of inertia of all system components, especially the satellite base and the unknown target.\nIn this paper, we focus on flexibilities and fuel sloshing effects in the free-floating dynamics and the related parameter identification. The Reduced Dynamics Algorithm (RDA) method to identify the parameter of a rigid body system we proposed in [2] was extended separately to both effects. For the sloshing model we propose a method to combine liquid sloshing with the general free-floating robot dynamics.\nTo accomplish this task we assume that the manipulator is equipped with joint position and torque sensors and the standard GNC (Guidance Navigation and Control) sensors on board. Finally, numerical simulations are done do show the feasability of the proposed method."}, {"section_title": "B. Related Work", "text": "The authors in [3] use an on-line parameter adaptation for a handled load and a flexible manipulator arm by minimizing the end effector positions. An alternative method to estimate vibrations of flexible space structures is presented in [4] by the use of range imaging sensors. In [5] a flexible space manipulator is modeled with the help of finite element methods and an adaptive control is proposed with actively damping out the flexible motions of the arm during maneuvering.\nFor modelling and identifying fuel sloshing there are several methods proposed in the literature. In general they use two main approaches for mechanical equivalent models: multi mass spring-damper equivalent and the pendulum equivalent. The authors in [1] , [6] , [7] use the pendulum equivalent modelling for lateral sloshing analysis. For the sloshing fuel mass a pendulum mass is used. To define the equivalent pendulum length, pendulum mass, spring and damping constants, they carried out one-DoF (degree of freedom) lateral experiments with different fuel types with a sensor equipped simplified fuel tank. The parameters are identified with a MATLAB Parameter Estimation Toolbox. One result they propose is, that the fuel viscosity and hence the type of fuel has no effect to the pendulum length and the slosh frequency. To model more than one modes multi pendula models are used, e.g. in [8] and [9] . Multi mass spring models are alternatively used in [10] - [12] .\nTo obtain the right parameters for the pendulum equivalent of a defined tank and fuel configuration, there are some one-DoF experiments described in the literature, which use simple lateral acceleration profiles to identify the unknown parameters (e.g. [1] and [13] ). But these methods need to know the fill level of the tank and must be carried out on Proceedings of 2014 International Conference on Modelling, Identification and Control, Melbourne, Australia, December 3-5, 2014 ground with extra measurement equipment like force-torque sensors."}, {"section_title": "II. METHOD DESCRIPTION", "text": "In this paper we focus on two disturbing dynamic effects, which the free-floating robot control has to cope with during a realistic OOS mission: flexible appendages and liquid fuel sloshing. In Fig. 1 the principle parts of the focused OOS system is sketched. The manipulator is assumed to have both rigid joints and link. \nwith\nand\nwhere\n, H mp \u2208 R The generalized coordinates for the base\nis composed of the position and orientation (Euler angles)\ndepicts the manipulator joint positions and the vector \u03b2 p \u2208 R m\u00d71 describes the panel joint deflection. The variables x b (since we are assuming a free floating robot) and \u03b2 p are assumed to be not actuated and \u03b2 p,0 is the initial panel deflection and is defined here for all panel joints to\n2) Excitation: For the identification of the flexible modes of the flexible appendages we use manipulator maneuvers to excite the modes and we assume an a priori knowledge of the orientation of their rotational axis. For reasons of simplification we assume all flexible joints to be parallel. To obtain the highest impact with the highest system answer we propose to obtain in general with a satellite angular base acceleration parallel to the flexible joint acceleration a\u1e61\nThe satellite translational acceleration should be both parallel to the translational motion of the CoM of the flexible appendage and perpendicular to the flexible joint connection vector, e.g. solar panel surface:\nSince we are dealing with a not actuated satellite base we have to generate such motion vector with the manipulator. Trajectory Optimization: To obtain a trajectory fulfilling the conditions for well-excited flexible modes, we use a Bspline parametrization, as we proposed in [14] . The trajectory optimization is addressed here as a nonlinear optimization problem with constraints. The optimization problem contains a configuration space C of dimensions C(\u03b8) \u2286 n , where n is the number of robot joints to be optimized and \u03b8 is the vector of joint positions . The time interval for the spline is t f . The optimization problem can be formulated as min\nProceedings of 2014 International Conference on Modelling, Identification and Control, Melbourne, Australia, December 3-5, 2014\nwhere \u0393 as cost function and defined as the sum of the scalars of the components of the base angular acceleration parallel to the flexible joints:\nwhere the summand is the reciprocal of the sum of the mentioned component of the angular base acceleration over a certain number of preselected points h along the trajectory. As a simplified approach, as many manipulator joints as possible can be configured to be parallel to the flexible joints and only these joints move with the allowed maximum speed and acceleration (close to dirac impulse).\n3) Identification: For the free-floating robot system we assume to be known the manipulator parameter. The parameters to be estimated are defined for the described system as\n\u2022 natural frequency \u03c9 n \u2022 mass, center of mass and inertia matrix of the satellite base and the flexible appendages\nAs first step, we identify the natural frequency with the use of the measured joint torque sensor signals as well as the satellite base angular velocity signals (gyros). Note, the joint torque sensor is assumed to be after the joint gear to measure only the acting torque without joint friction effects. Applying a Fast Fourier Transformation (FFT) to this signals measured as answer after the excitation, the natural frequency can be obtained.\nThe remaining parameter are identified with a nonlinear optimization which is defined with the cost function \u0393 as the sum of all differences between the expected and the measured torques as\nB. Sloshing 1) Model Description: Computational Fluid Dynamic (CFD) models nowadays come very close to the real behavior of a liquid, but they need very high computational power and time and are not usable for real-time control design. So the most used method to design liquid sloshing for spacecraft control is the equivalent mechanical model. It describes the macroscopic mechanical characteristics very well. There are two different equivalent mechanical models used in the literature: spring-mass equivalent model and pendulum equivalent model. In this work, we used the pendulum analogy. In Fig. 2 the principle of the used fuel sloshing model is shown.\nThe model consists of two parts: one fixed mass and one or more slosh masses connected to pendulum, spring and damper elements. The fixed mass m 0 is assumed to be non-sloshing and stationary with respect to the tank and affects the total mass and inertia of the satellite. The second The spring and damper elements take into account effects caused by viscous and friction forces with the tank walls and furthermore forces caused by diaphragm used in pressurized fuel tanks. The pendulum arm is assumed to be massless. The fulcrum of the pendulum is free to rotate in three dimensions like a spherical joint. In this simplified model it is assumed that the sloshing is only a surface wave. In Fig. 2 a free surface is sketched without any diaphragm. The initial pendulum deflection \u03b1 is assumed to be zero without external disturbance. One pendulum hereby represents one sloshing mode. In our case we want to consider only the first fundamental sloshing mode which is assumed to be dominant in this case.\nThe equation of motion of the pendulum can be easily set up and should not be repeated here. For reasons of impact to the general free-floating robot dynamics and to the identification process, the generated forces due to the fuel sloshing effect are focused next.\nTo analyze forces caused by the fuel sloshing acting to the satellite base body during manipulator maneuver, we extract the free body diagram of the sloshing mass in Fig. 3 . The forces acting on the tank can be split up into a force due to the acceleration of the mass, centripetal force, gravity force and damping force. The sum related to the body diagram can be written as\nProceedings of 2014 International Conference on Modelling, Identification and Control, Melbourne, Australia, December 3-5, 2014\nNote, a rotational viscous damper with the coefficient c \u03b1 is included in the damping term in the equations above.\nTo analyze the contribution of certain force parts described above, we assume a small angle approximation and can solve the resulting slosh force to the satellite base as follows:\nThe equations above show clearly that for the same components of the external movement\u1e8d b the lateral force and hence the lateral slosh effect is higher that the axial effect. Due to the fact that we handle a damped oscillation system, which we are exciting during robotic manipulation, the problem of the natural frequency arises. The slosh mass pendulum frequency can be obtained as [1] \nThe parameters of the pendulum equivalent like the pendulum length l s , the fixed fuel mass m f ix , equivalent sloshing mass m s , stiffness k s and damping d s depend strongly on the used fuel tank (geometry, wall friction, use of diaphragm, pressure in tank, geometric slosh damping features) and fuel properties (total fuel mass in the tank and fuel viscosity).\nTo include the dynamic equivalent slosh model into the general equation of motion for free-floating robots, the 3D-pendulum with spring-damper elements can be modeled as an unactuated, passive robot link. The fulcrum of the pendulum is formulated as wrist kinematics: two serial rotational joints without mass and zero relative distance. The degree of freedom around the fulcrums axis is assumed to be locked since the effect of this motion is assumed to be insignificant. The equation can be expressed similar to (1) as\nwith\nwhere the terms for the panel in (1) are replaced with the terms for the pendulum.\nThe matrices H bs \u2208 R"}, {"section_title": "6\u00d73", "text": ", H ms \u2208 R n\u00d73 and H s \u2208 R"}, {"section_title": "3\u00d73", "text": "are the inertia matrices of the satellite base (index b), manipulator (index m), sloshing mass (index s) and coupling inertia matrix between the base, the manipulator and the sloshing mass, respectively. The fixed fuel mass is added to the rigid satellite base body parameter and will not appear as an extra parameter to be identified. The generalized coordinate \u03b1 s \u2208 R 3\u00d71 describes the pendulum fulcrum deflection and is assumed to be not actuated and defined to be a zero vector in initial condition.\n2) Excitation: Since the sloshing model can be defined as a parallel link manipulator with a concentrated mass at the top of the link and connected via a flexible spring damper element, the excitation can be optimized similar to case of flexible appendages, see II-A.2\n3) Identification: Similar to the identification of flexible appendages we assume the manipulator as known. The parameters for the sloshing model to be estimated are defined here as\n\u2022 natural frequency \u03c9 n (Hz) \u2022 Mass, center of mass and inertia matrix of the satellite base and the slosh mass m s (kg)\n\u2022 Pendulum length l s (m)\nFor the method of identification we chose the same as for the flexible appendages case, see II-A.3."}, {"section_title": "III. NUMERICAL SIMULATION", "text": "To investigate the performance of the described methods, numerical simulations were conducted both for the flexible model and the liquid sloshing model. For the simulation we used a 7-DoF redundant manipulator mounted on a base satellite with the total manipulator kinematics length of l m = 3 m. As flexible appendages we defined two solar panels consisting each of two flexible joints, resulting in a total of 4 flexible joints. For the sloshing model, we used one point mass with a 2 DoF joint connected to the fulcrum of the pendulum. The parameters of the model are listed in Tab. I   TABLE I "}, {"section_title": "132", "text": "A. Flexible Appendages We want to investigate here the influence of flexible appendages on the accuracy of a system identification (mass, center of mass and inertia of the satellite base) in orbit. To achieve this, a simulation with a rigid body free-floating robot was conducted first. With the resulting simulated sensor data (joint positions, joint torques and base angular velocity, here without simulated noise), a rigid body identification was carried out to obtain an identified model. The latter contained the uncertainties of a rigid body identification, resulting from the identification method presented in [2] . This model was used as a refence model for the intended investigation, by generating a reference trajectory about which positioning errors could be computed for successively identified models.\nAt first, the excitation trajectory was executed with the full flexible model and a rigid body identification was repeated. To quantify the accuracy of the rigid body parameter identification with the flexible model, the difference to the reference trajectory (end effector position and orientation) was computed. The results are listed in Table II (column Rigid ID). Both the mean and the maximum difference along this trajectory are given.\nIn a second step, with the same simulated sensor data of the flexible model a parameter identification including the flexible parameter was carried out. The simulation of the reference trajectory with the resulting identified flexible model was then also compared with the reference simulation. The end effector error of this comparison is shown in the third column of Table II . It can be seen that the flexible appendages on a satellite have measurable significant influence on the rigid body identification, as shown in the Rigid ID column, and the parameter identification can be improved with an extension to the flexible model parameters (column Flex. ID). In Fig. 4 the free motion after the commanded manipulator trajectory is plotted. The oscillating flexible appendages cause a base motion (bottom) which results in measurable robot joint torques (top). In this example, joint 2 and 4 are parallel to the flexible joint axis and show the highest torque signals.\nThe natural frequency \u03c9 n was estimated out of the joint torque and base velocity data with the Fast Fourier Transformation data of the signals. The generated Power Spectral Density (PSD) of the signals are plotted in Fig. 5 .\nThe first two natural frequencies of the flexible freefloating robot system can be seen in the two peaks of the data plot A) and can be quantified with \u03c9 n,1 = 0.23Hz and \u03c9 n,2 = 0.68Hz. The PSD of the trajectory for the rigid body identification B) shows that it avoids the natural frequencies of the flexible model. "}, {"section_title": "B. Sloshing", "text": "In order to analyze the behavior of the sloshing model in relation to the parameter identification accuracy, we processed similar to that of the flexible model case. Thus, a simulation with an excitation trajectory to excite the sloshing modes was conducted. From the model answer after the excitation the natural frequency was obtained from the simulated sensor data (joint torques and base angular velocity). In Fig. 6 the model answer of the sloshing is plotted. The strong damping of the liquid sloshing can be seen clearly in the significant decrease of the sensor signals. The analysis of the signals transformed into the PSD (A) results in a natural frequency of the sloshing model of \u03c9 n = 0.06Hz (see Fig. 7 ). The excitation trajectory for the rigid body identification shows to have the main frequencies below this critical natural frequency (B). The influence of the sloshing parts to the rigid body identification are documented in Table III in the column Rigid ID. The data in column Slosh. ID prove the improvement of the use of a sloshing identification model. The results in the previous section show that flexible appendages mounted on a free-floating satellite can have significant influence to the general dynamics of free-floating robots. For the parameter identification these disturbance effects can be seen clearly. The challenge to excite flexible modes only with the help of the manipulator are the limited constraints of the joint motions in terms of joint velocity and acceleration. Thus, high frequencies can not be excited sufficient. But due to the fact that the expected manipulator motions during an OOS mission will be in a lower frequency range, the analysis in the range below f = 1.5Hz seems to be sufficient."}, {"section_title": "Proceedings of 2014 International Conference on", "text": "Liquid sloshing effects are expected to be more critical during an OOS mission due to the fact that the natural frequencies are closer to the expected task motions.\nIn this paper we focused on the analysis of the general influence of flexible appendages and liquid sloshing to the freefloating dynamics and rigid body parameter identification. For this purpose we extended the parameter identification to both flexible and sloshing effects. The results show in both cases a significant influence to the dynamics and an improvement of the identified dynamic models. "}]