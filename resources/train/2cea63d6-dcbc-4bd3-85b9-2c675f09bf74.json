[{"section_title": "Abstract", "text": "At the Space Launcher System Analysis (SART) department of DLR, an engineering tool for the simulation of propellant management systems is under development. The tool is called PMP (Propellant Management Program). This paper will describe the tool and some of the models the tool uses. Some models have been adapted or added and some will be implemented in the future. The paper will also describe the results of a test case compared to the EADS Astrium tool EUCES."}, {"section_title": "Introduction", "text": "A well designed propellant management system in rocket stages is of crucial importance for successful launcher design. The propellant management system can be optimized such that propellant residuals and loaded propellant are minimized. This is especially important in upper stages, where each kilogram saved can be directly added to the payload. To obtain an efficient design, it is necessary to be able to simulate propellant behaviour and propellant management systems using fast engineering methods (CPU time in order of seconds, maximum a few minutes). This way propellant management can be integrated in the preliminary design phase where different propellant management systems can be compared and a tradeoff can be made. Within the German national program \"cooperation project upper stage\", the SART (Space Launcher Systems Analysis) department at DLR in Bremen is developing a tool for this purpose."}, {"section_title": "The tool is called PMP (Propellant Management Program)", "text": "The main task of the propellant management system is to make sure that propellant enters the engine under the right conditions. Typically about 90% of the launcher takeoff mass consists of propellant. The most obvious way to minimize propellant mass is probably to increase the specific impulse of the engine. But engine performance cannot be increased indefinitely. In fact current rocket engine technology is reaching its limits. It is therefore important to optimize the propellant management system to minimize propellant losses (for example residual propellant and propellant boil off). In its current form the tool PMP calculates amongst others the required pressurization gas mass, pressure losses throughout the propellant feed system, pressure at all locations, and it includes a simple method for the determination of evaporated propellant mass and self-pressurization. Visualization of the propellant management system is also possible (Figure 1 ). For the future some extensions and improvements are foreseen. For example a more detailed model for evaporation of the liquid and stratification of liquid and gas is to be implemented. Also a model for propellant slosh is foreseen. Propellant slosh can create undesired forces which have to be counteracted by the attitude control system, and it can also lead to undesired thermodynamic effects like strong pressure drops. An example of an upper stage propellant management simulation will be presented and compared to EUCES, a tool used at Astrium based on EcosimPro. "}, {"section_title": "Logic of the program", "text": "The goal of PMP is to quickly simulate a propellant management system (CPU time in the order of seconds, maximum a few minutes). The tool is not intended for detailed simulation of every phenomenon, but rather it should be able to give an estimation of integral values. The input data of PMP consists of two parts; a mission specific part and a propellant system specific part. For the mission specific part the user has to specify the mission duration and the desired tank pressure. In addition the user may specify liquid outflow (propellant mass flow), acceleration, external temperatures and radiative heat flux. The mission specific input can be defined as a function of time. The propellant system specific input consists of for example wall thickness, materials, propellant mass, initial propellant temperature and tank geometry. It is not a function of time. After providing the input PMP is able to calculate the following data:\n\u2022 pressure (including hydrostatic pressure)\n\u2022 pipeline pressure drops \u2022 required pressurization mass \u2022 masses of all components \u2022 temperatures of the ullage and liquid \u2022 propellant loss (evaporation, venting)\n\u2022 Net Positive Suction Pressure (NPSP)\nDuring the simulation, pressure in the tanks will start to vary because of tank drainage and propellant boil off. PMP adapts the pressurization gas mass flow such that the desired pressure in the tank is reached. If the pressure in the tank exceeds a maximum, gas is vented until the desired pressure is reached.\nUsing tank pressure, hydrostatic pressure, pipeline radius, material properties and pipeline geometry (length and bends) velocity and pressure at each location in the pipeline can be calculated. Using the pressure at the feedline exit (engine inlet), the Net Positive Suction Pressure (NPSP) is calculated. The NPSP is very important parameter in Propellant Management System design. If it is too low, cavitation may take place in the turbopump which can lead to catastrophic failures."}, {"section_title": "Phase change models", "text": "A major improvement in PMP has been made on the fluid temperature and phase change models. The old model assumed the liquid temperature to be homogenous and constant. The assumption was that heat flowing into the liquid is used to evaporate a certain amount of this liquid. The amount of liquid evaporated was calculated by dividing the heat flow into the liquid by the energy required to heat up the liquid to the boiling temperature plus the heat of evaporation plus the energy required to heat up the evaporated liquid to the ullage gas temperature. Temperature of the liquid was assumed to remain unchanged: Apart from the fact that liquid temperature was assumed constant, the model has some additional shortcomings and therefore was adapted. In reality, some liquid can evaporate even without energy inputs from the surroundings. According to the evaporation model based on kinetic theory [1] [2], the evaporated mass is a function of the saturation pressure of the liquid and the partial vapour pressure in the ullage. As long as there is a positive pressure difference, liquid will evaporate even if there is no energy input from the surroundings. In this case energy will be extracted from the liquid and the liquid temperature will drop. If the liquid saturation pressure drops below the partial pressure in the gas (the pressure difference is negative), gas will start to condensate. The liquid temperature can be calculated by determining the net heat input into the liquid. To obtain the net heat input, the heat required for evaporation of the liquid mass determined with equation (2) is subtracted from the heat input into the liquid from the surroundings.\nThe problem when using this model is the determination of the accommodation coefficient. This coefficient is a measure for that chance of a molecule to undergo a phase change. The accommodation coefficient can obtain values between 0 (no phase change) and 1 (maximum evaporation rate). Values for this accommodation coefficient are hard to obtain and values indicated in literature tend to vary over a large range.\nThe kinetic theory may not be valid for all fluids. In such cases, the accommodation coefficient can be a 'tuning' parameter to adapt the numerical results to that of measured results, rather than a real 'physical' parameter. For these cases, limiting the accommodation coefficient between 0 and 1 makes no physical sense anymore."}, {"section_title": "Example", "text": "PMP including the new phase change model was compared to the EADS Astrium tool EUCES. Like PMP, EUCES is a propellant management tool which calculated propellant conditions in tanks and pipelines [3] [4]. However, the goals of each tool are somewhat different. Whereas PMP is meant to quickly determine the integral values of the propellant management system, EUCES simulates the processes on a more detailed level. EUCES has been extensively tested. It is therefore interesting to compare PMP with EUCES. A simple, adiabatic tank model without any heat transfer between propellant and tank wall but including propellant outflow has been set up. The tank is pressurised using helium as a pressurant. Using this simplified model, some basic things such as evaporated propellant mass, pressurisation gas mass, ullage temperature and heat transfer between liquid and ullage could be compared. The test case concerns a model of the upper stage LOX tank of the WOTAN K3 launcher design. The WOTAN launcher has been jointly designed by EADS Astrium and DLR-SART [5] . The input data for the test case can be found in Table 1 . In Figure 2 it can be seen that the upper stage tanks as modelled in PMP are not an exact representation of the actual design. For example the cylindrical sections in the middle of the tanks are a bit higher in the PMP representation. This is explained by the fact that PMP can only model cylinders and spherical segments, but the actual tank domes are not spherical segments. However, this is usually a very good approximation of the tank shape. Figure 3 shows the heat transfer between liquid and ullage. The negative numbers mean heat is transferred from the ullage to the liquid. The heat transfer coefficient between liquid and ullage has been set to equal values for both cases (see Table 1 ). However, a difference in heat transfer can still be seen. This can be explained by the fact that when using PMP, the tank geometry is approximated. Heat transfer between the liquid and ullage is a function of the heat transfer coefficient, the liquid surface area and the temperature difference between liquid and ullage. As the tank is drained, the liquid surface area changes. Because tank geometries for both cases differ slightly, the liquid surface area will also differ and therefore there is a difference in heat transfer.\nThe simulation begins at about t=220 s, after first stage seperation. At this time the tank is almost completely filled. The liquid surface area is small and the heat transfer low. At about t= 620 s, the tank is filled half way. Here the tank radius is the largest and the liquid surface area has reached a maximum. Therefore the heat transfer has also reached its maximum value. "}, {"section_title": "Figure 4. Evaporated Liquid Mass", "text": "The development of the ullage temperature is shown in Figure 5 . The PMP simulation results in a somewhat lower ullage temperature, which seems a bit strange because according to Figure 3 the heat transferred from the ullage into the liquid is less in case of PMP. Therefore one would expect the ullage temperature to be higher. Pressurisation gas mass (Helium) is higher for the PMP case, as can be seen in Figure 6 . A lower ullage temperature will lead to a lower pressure and therefore the pressurisation gas mass must be higher to maintain the desired tank pressure. "}, {"section_title": "Thermal stratification in the liquid", "text": "Thermal stratification in the liquid is important because a change in the liquid temperature also means a change in the NPSP. If the liquid temperature is too high, NPSP can drop below critical values and cavitation can take place in the turbopumps. Stratification of the liquid can also have a negative side effect when propellant sloshing occurs. Propellant sloshing is not yet implemented in PMP. Propellant sloshing dynamics leads to undesired mechanical loads and can also lead undesired thermodynamic effects, such as strong pressure drops due to the mixing of thermal layers in the liquid. The dynamics of sloshing and its mechanical loads are well understood and analytical relations exist. Implementing these into the program should be fairly straightforward. The thermodynamic aspect of sloshing is a more difficult subject. Currently, experiments are carried out by the Centre of Applied Spaceflight and Microgravity (ZARM) in Bremen to investigate the latter. Simplified models are extracted from these experiments and from numerical analysis with 3D flow solvers such as the commercially available code FLOW 3D [2] . It is foreseen to implement these in PMP.\nThermal stratification in the liquid can be modelled by assuming that the tank is cylindrical and the heat input through the tank domes is negligible. This way, a boundary layer model can be set up and by integrating the liquid mass flow in the natural convection boundary layer along a heated tank wall, an estimation for thermal stratification can be obtained. Additional assumptions are:\n\u2022 That the initial temperature of the liquid is uniform \u2022 That all of the heat input into the tank wall appears at sensible heat in the boundary layer \u2022 That all of the flow in this boundary layer goes into a heated upper stratum \u2022 That the lower stratum remains at initial (bulk) temperature \u2022 That there is no mixing between the upper and lower stratum and following the procedure in [6] it is possible to compute a heated volume (volume of the upper stratum) and an average temperature of this heated volume. A schematic representation of the model is given in Figure 7 . Here, T b is the initial (bulk) temperature and T s is the liquid surface temperature. The average temperature of the heated volume will be somewhere between T b and T s , depending on the temperature profile in the heated volume.\nThe increase in heated volume can be determined using: The average temperature in the heated upper stratum can be calculated using the following relation: By assuming a linear temperature profile in the upper stratum the temperature at the liquid surface can be calculated from T b (bulk temperature) and T av (the average temperature in the upper stratum). As soon as the temperature at the liquid surface reaches the saturation temperature, the evaporation process is called 'natural convection boiling'. Once the liquid surface temperature is known, the evaporation rate can be calculated using (2). Results of this simplified model will be compared with results using FLOW 3D. Figure  8 shows the results obtained by a FLOW 3D simulation of an experiment conducted at ZARM using liquid nitrogen (LN2) as a fluid. The figure shows that part of the test-tank filled with LN2. In this figure the heated boundary layer which transports the warm liquid into the upper stratum can clearly be seen, justifying some of the assumptions made in the model described above. In the future, also simulations of real launch vehicle tanks will be made using FLOW 3D. "}, {"section_title": "Future work", "text": "The stratification model in its current form is limited to tanks heated through the cylindrical part only. This can be a good approximation when the tank is largely cylindrical and the dome surfaces are small compared to the cylindrical surface. This is the case in for example first stage tanks. Additionally, a large part of the volume in the upper dome will be occupied by the ullage. In such a case the assumption that no heat will enter the liquid via the upper dome is a valid one. In application where the dome surface is large compared to the cylindrical surface, heating through the domes cannot be neglected. This is often the case for upper stage tanks. The WOTAN LOX tank illustrates this very well. The cylindrical part of this tank is almost zero and thus the heating of the liquid takes place only through the domes. This is clearly an example of a tank where the stratification model in its current form does not apply. A part of the future work will therefore be the adaptation of the model such that it can also be used for upper stage tanks. Another important part of the future work will be the implementation of a sloshing model. The sloshing model with not only determine the forces on the stages, but it will also include a model for the estimation of the pressure drop encountered during cryogenic sloshing. The stratification and slosh model will be developed by investigating the results of 3D numerical analysis using FLOW 3D, as well as investigating the results from experiments executed at ZARM."}]