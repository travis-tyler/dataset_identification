[{"section_title": "Abstract", "text": "We present a new Stata command, tebounds, which implements a variety of techniques to bound the average treatment effect"}, {"section_title": "Introduction", "text": "The causal effects of binary treatment on an outcome of interest are a central component of empirical research in economics and many other disciplines. When individual units self-select into treatment, and when prospective randomization of the treatment and control groups is not feasible, researchers must rely on observational data and adopt alternative empirical methods intended to control for the inherent self-selection. If individual units self-select on the basis of observed variables (selection on observed variables), there exist a variety of appropriate methodologies to estimate the causal effects of the treatment. If instead individuals self-select on the basis of unobserved variables (selection on unobserved variables), estimation of causal effects is more difficult. In such cases, strong assumptions are often needed in order to achieve point identifi-cation. The credibility of such approaches is further diminished if treatment assignment is misreported. Moreover, as shown in Millimet (2011) , estimators appropriate for situations characterized by selection on observed variables may perform poorly when treatment assignment is misreported.\nAn alternative approach is to abandon the goal of point identification and instead seek to partially identify (or set identify) causal effects.\n1 Partial identification approaches are more often credible than those yielding point identification as they highlight what may be learned without invoking perhaps untenable assumptions. As Manski (2013, p. 2-3) states: \"Exact predictions are common, and expressions of uncertainty are rare. Yet policy predictions often are fragile. Conclusions may rest on critical unsupported assumptions or on leaps of logic. Then the certitude of policy analysis is not credible.\" Similarly, Bontemps et al. (2012 Bontemps et al. ( , p. 1129 write: \"Point identification is often achieved by using strong and difficult to motivate restrictions on the parameters of interest.\" Tamer (2010, p. 168) states: \"Stronger assumptions will lead to more information about a parameter, but less credible inferences can be conducted.\" Instead, Manski (2013, p. 3) advocates the \"honest portrayal of partial knowledge.\"\nWhile it is certainly true that partial identification approaches may be less satisfying than estimators that yield point identification, there is much that can be learned without imposing stringent assumptions. Tamer (2010, p. 168) argues that \"models that do not point identify parameters of interest can, and typically do, contain valuable information about these parameters.\" In particular, bounds on the parameter of interest often exclude zero, thereby identifying the sign of the parameter. Moreover, bounds can exclude extreme values which may, for example, be useful in determining if a program fails a cost-benefit analysis.\nHere, we provide a means to partially identify the average treatment effect (ATE) of a binary treatment on a binary outcome under a variety of assumptions concerning the nature of the self-selection process and the nature and frequency of misreporting of treatment assignment."}, {"section_title": "Framework and Methodology", "text": "Focusing on binary outcomes, the ATE is given by\nwhere Y (1) denotes the outcome if an individual unit receives the treatment, denoted by D * = 1, and Y (0) denotes the outcome if an individual unit does not receive the treatment, denoted by D * = 0. Y (1) and Y (0) are potential outcomes since only one is realized for any given individual. The observed outcome for a particular individual is given by Y = D * Y (1) + (1 \u2212 D * )Y (0). X denotes a vector of observed covariates whose values lie in the set \u2126. To simplify notation, the conditioning on X is left implicit throughout the remainder of the paper.\nThe terms in (1) can be written as:\nThere are two problems confronted in the identification of the ATE. The first is referred to as the selection problem. If receipt of treatment is observed, then the sampling process itself identifies the selection probability P (D * = 1), the censoring probability P ( * for all units, the sampling process alone does not provide any useful information on true treatment status D * , and all the probabilities on the right hand side of (2) and (3) are unknown.\nTo proceed, we present some notation and preliminaries. First, note the following identities:\nSecond, let the latent variable Z * denote whether reported treatment assignment is accurate or not, where Z * = 1 if D * = D and zero otherwise. Third, define the following notation: We can now further decompose P [Y (1) = 1] and P [Y (0) = 1] as follows:\nUnless assumptions are imposed on the nature of the selection problem, the missing counterfactual terms (P [Y (1) = 1|D * = 0] and P [Y (0) = 1|D * = 1]) are not identified. Similarly, absent further assumptions, the terms representing the extent of measurement error (\u03b8"}, {"section_title": "Assumptions", "text": "We now turn to the assumptions imposed in order to bound the ATE in the presence of selection and measurement error. For additional discussion regarding these assumptions and their practical implications, see Manski and Pepper (2000) , Kreider and Pepper (2007) , Kreider et al. (2012) , and Gundersen et al. (2012) . We stress that the appropriateness of these assumptions will tend to vary by application. For example, in a study of food stamp programs, respondents may be unlikely to report receiving food stamps when in fact they do not, in which case an assumption of no false positives may be appropriate. Users of the tebounds command should critically consider these various assumptions when interpreting their results.\nAssumptions regarding measurement error include:\nA1 Arbitrary errors with upper bound, P (Z * = 0) \u2264 Q. Under this assumption, we have the following general conditions on the measurement error parameters: We discuss each of these assumptions in more detail throughout the remainder of this section."}, {"section_title": "Exogenous Selection Bounds", "text": "The assumption of exogenous selection implies\nIn this case, equations (2) and (3) become\nrespectively. The ATE is then given by\n, which is point identified in the absence of measurement error. However, allowing for measurement error, D * is unobserved and these quantities can be written as\nThus, point identification is not possible except under strict assumptions about the values of the unknown quantities in equations (8) and (9). Instead, we may use Assumptions A1 and A2 to bound the ATE. For example, following Proposition 1 in Kreider and Pepper (2007) , we know\nwhere\nwhere\nBounds on the ATE are then given by\nHowever, these bounds are not sharp since it is possible that a different set of measurement error parameters will maximize (minimize) the difference to get the upper (lower) bound on the ATE. Also, \u03b8\nQ has yet to be imposed. Accounting for both of these issues, Proposition A.1 in Kreider and Pepper (2007) shows:\nEstimation follows by performing separate two-way grid searches for (b,b) and (a,\u00e3) over the feasible region, where:\n, and\nIn our tebounds command, the granularity of the grid search is dictated by the np option. Note that the results of the grid search for (b,b) may not separately minimize LB 1 and maximize U B 0 ; however, by focusing on the difference, LB 1 \u2212 U B 0 , we ensure that the same (b,b) are used in LB 1 and U B 0 which ultimately provides tighter bounds than if we allowed (b,b) to vary across LB 1 and U B 0 , and similarly for (a,\u00e3). If we further impose the assumption of no false positives, equations (8) and (9) simplify to\nBounds on P [Y = 1|D * = 1] are then given by\n2 The two-way grid search allows the bounds forb and\u00e3 to vary based on the proposed values of b and a, respectively, as well as Q. Without the inclusion ofb and\u00e3, the bounds as presented in Kreider and Pepper (2007) do not necessarily satisfy \u03b8 Kreider et al. 2013) . We are grateful to Brent Kreider for his comments and assistance.\nSimilarly, bounds on P [Y = 1|D * = 0] are given by\nBounds on the ATE are again given by\nEstimation follows by performing separate grid searches for h and a over the feasible region, ensuring that LB 0 , LB 1 , U B 0 , and U B 1 do not exceed one."}, {"section_title": "Worst-Case Selection Bounds", "text": "The worst-case bounds are obtained without invoking any assumptions; only the sampling process is utilized. The ATE is given by equation (1) and the components of the ATE are in (2) and (3). Utilizing the fact that the missing counterfactuals in (2) and (3) are bounded by zero and one, we know that\nin the absence of measurement error, and bounds on the ATE follow as above. Allowing for measurement error, the bounds become\nIn this case, under the assumption of arbitrary errors,\nwhich yields the following bounds for the ATE:\nUnder the assumption of no false positives,\nand the previous bounds simplify to\n]."}, {"section_title": "Monotone Treatment Selection (MTS)", "text": "The worst-case bounds may be tightened if we are willing to impose some assumptions on the nature of the selection process. The MTS assumption assumes that expected potential outcomes move in a particular direction when comparing individuals in the treatment and control groups. We consider two cases: negative and positive selection. However, one must be cautious in interpreting each case depending on whether the outcome, Y , is desirable or not. Here, we assume that Y = 1 corresponds to the desirable outcome."}, {"section_title": "Negative Monotone Treatment Selection (MTSn)", "text": "MTSn refers to the case of negative selection. In this case, individuals in the treatment group are more likely to experience a bad outcome conditional on treatment assignment. As Y = 1 denotes a good outcome, MTSn implies\nwhere the final term is non-negative under MTSn. This implies\n, and the upper bound is obtained assuming P [Y (1) = 1|D * = 0] = 1. This yields \nAllowing for measurement error, these bounds become\nUnder assumption A1 above (arbitrary errors with upper bound, P (Z * = 0) \u2264 Q), the lower bound is given in (12) and the upper bound in (18). Similarly, under assumption A2 (no false positives, P (Z * |D = 1) = 1), the lower bound is given in (17) and the upper bound in (19)."}, {"section_title": "Positive Selection (MTSp)", "text": "MTSp refers to the case of positive selection. In this case, individuals in the treatment group are more likely to experience a good outcome conditional on treatment assignment. As Y = 1 denotes a good outcome, MTSp implies\nSimilar to the discussion on MTSn, we can rewrite P [Y (1) = 1] as \nAllowing for measurement error, these bounds become\nUnder assumption A1 above (arbitrary errors with upper bound, P (Z * = 0) \u2264 Q), the lower bound is given in (18) and the upper bound in (12). Similarly, under assumption A2 (no false positives, P (Z * |D = 1) = 1), the lower bound is given in (19) and the upper bound in (17)."}, {"section_title": "Monotone Treatment Response (MTR)", "text": "The MTR assumption may be invoked in addition to MTS or in isolation. MTR assumes that individuals do not select into a treatment that would make them worse off in expectation. Again, one must be cautious in interpreting each case depending on whether the outcome, Y , is desirable or not. Here, we assume that Y = 1 corresponds to the desirable outcome. Thus, the MTR assumption\nInvoking MTR in isolation implies that the upper bounds are given by the worst-case upper bounds in (18) and (19) under the assumptions of arbitrary errors and no false positive, respectively. The worst-case lower bounds, however, are now replaced by zero. Combining MTR and MTSn (or MTSp) implies that the upper bounds are given by the upper bounds under MTSn (MTSp), while the lower bounds again are replaced by zero."}, {"section_title": "Monotone Instrumental Variable (MIV)", "text": "The MIV assumption implies that the latent probability of a good outcome conditional on treatment assignment -P [Y (1) = 1] and P [Y (0) = 1] -varies (weakly) monotonically with an observed covariate. The MIV assumption alone has no identifying power; therefore, following Kreider and Pepper (2007) and Kreider et al. (2012) , we combine the MIV assumption with the MTS assumption and then with the MTS and MTR assumptions."}, {"section_title": "MIV and MTS", "text": "Let \u03bd denote the monotone instrument and assume without loss of generality that P [Y (1) = 1] and P [Y (0) = 1] are non-decreasing in \u03bd. Defining u 1 < u < u 2 , the MIV assumption implies\nRecall, the MTSn assumption implies\nsuch that without measurement error the bounds are given by\nCombining MIV and MTSn involves the following steps: 3 1. Split the sample into J cells, j = 1, 2, ..., J, based on values of \u03bd, and let P j denote the sample fraction in cell j. T n is therefore a weighted average of the appropriate lower bound estimates across all J cells, constructed by taking LB 1 in each jth cell and averaging over the supremum of the individual lower bounds across all cells below and including the jth cell. , k = 1, 2, ..., K. This process is identical to that in step (3) above, performed separately for each kth pseudo-sample."}, {"section_title": "Calculate the MTSn bounds for", "text": "3 Combining MIV with MTSp follows similarly and is therefore excluded for brevity. 4 As before, one must be cautious as this assumes Y = 1 is a desirable outcome."}, {"section_title": "(d) Compute the sample mean from the bootstrap as", "text": "(e) The estimated bias is given b\u0177\n(f) The bias-corrected LB is given by\n5. Calculate the overall UB for P [Y (1) = 1], denoted by U B 1 , as \n(e) The estimated bias is given b\u0177\n(f) The bias-corrected UB is given by\n7. Repeat Steps 3-6 to obtain the overall LB and UB for P [Y (0) = 1], denoted LB 0 and U B 0 , respectively.\n8. Obtain bounds for the ATE given by\nPrior to continuing, two comments are necessary. First, the MIV estimator suffers from finite sample bias (Manski and Pepper 2000) . Steps 4 and 6 in the preceding algorithm follow Kreider et al. (2012) and use the nonparametric finite sample bias-corrected MIV estimator put forth in Kreider and Pepper (2007) . However, Hirano and Porter (2012) caution against the use of bias-corrected techniques since such procedures cannot fully eliminate the bias in the case of nonsmooth estimators and may cause substantial increases in variance. Thus, users of tebounds may wish to assess the sensitivity of the bounds to the use of the bias correction.\nAn alternative to the bias correction procedure utilized in Kreider et al. (2012) is the precision-corrected approach recently proposed in Chernozhukov et al. (2013) .\n5 This procedure adjusts the the terms LB j and U B j in steps 3 and 6, respectively, before taking the sup or inf. Thus, the correction is applied during the estimation of the bounds of the conditional probabilities, Second, the asymptotic properties of estimators involving nonsmooth functions like sup and inf, such as those based on a MIV, are the subject of recent debate. Manski and Pepper (2000, p. 1007) note that \"the consistency of the resulting bounds estimates is easy to establish.\" However, Hirano and Porter (2012, p. 1769) show that in such cases \"no locally asymptotically unbiased estimators exist.\" The distinction may lie in that the objects of interest in Manski and Pepper (2000) , and here, are the bounds on the ATE. As a result, the weighted averages utilized in steps 3 and 5 yield a smooth estimator. In any event, obviously the asymptotic properties of such estimators have important implications for conducting proper inference. As this is the subject of ongoing research (see, e.g., Chernozhukov et al. (2013) and the references therein), users of the tebounds should keep abreast of developments in the literature."}, {"section_title": "MIV, MTR, and MTS", "text": "Combining the MIV, MTR, and MTS assumptions can further tighten the ATE bounds. The addition of the MTR assumption within each cell of the MIV is, however, a bit different than the imposition of the MTR (or MTS+MTR) assumption discussed previously. The difference arises because implementation of the MIV assumption does not entail bounding the ATE within each MIV cell. Rather, we are bounding the components of the ATE within each cell (i. 3 The tebounds Command"}, {"section_title": "Syntax", "text": "The tebounds command estimates bounds on the ATE under the assumptions discussed above. The syntax for the tebounds command is tebounds depvar if in weight , treat(varname) control(#)"}, {"section_title": "treatment(#) miv(varname) ncells(#) erates(string) k(#) np(#) bs reps(#) level(#) im survey weights(#) npsu(#)", "text": "nodisplay graph saving(string) replace"}, {"section_title": "Specification and Options", "text": "The tebounds command requires the user to specify an outcome variable, depvar, and a treatment assignment variable, treat(). The remaining options are detailed below:\ntreat(varname) specifies the variable name of the treatment indicator.\ncontrol(#) specifies the numeric value of treat used to indicate the control group, with a default value of 0. treatment(#) specifies the numeric value of treat used to indicate the treatment group, with a default value of 1. miv(varname) specifies the variable name of the MIV. The use of miv(varname) also calls a secondary miv command from within the tebounds command -the results of which are passed into the larger tebounds command. See Manski and Pepper (2000) , Kreider and Pepper (2007) , Manski and Pepper (2009), Kreider et al. (2012) , and Laff\u00e9rs (2013) for a more detailed definition and discussion of proper MIVs.\nncells(#) denotes the number of cells used in obtaining MIV bounds, with a default value of 5 cells. The MIV variable is divided by percentiles according to the number of cells specified in ncells. For example, the default of 5 cells will split the MIV variable into 5 groups according to the 20th, 40th, 60th, 80th, and 100th percentile values.\nerates(string) denotes the assumed rates of measurement error used to identify the ATE bounds, with a default string of \"0 0.05 0.10 0.25\" indicating assumed rates of 0%, 5%, 10%, and 25% measurement error.\nk(#) denotes the number of bootstrap replications used for the MIV bias correction, with a default of 100.\nnp(#) denotes the number of intervals over which the grid search is performed to tighten the bounds in the arbitrary classification error model (Kreider et al. 2013) .\nbs specifies that confidence intervals be calculated via bootstrap. The level of the confidence interval is specified in level, which defaults to 95%. Similarly, the number of replications can be specified in reps(#), with a default of 100 replications.\nim specifies that confidence intervals be calculated following Imbens and Manski (2004) . If left unspecified, confidence intervals are calculated using the percentile method.\nsurvey indicates that data are survey data and that survey weights have been assigned with svyset. The survey weights will be used as part of the ATE calculation as well as the bootstrap replications, if relevant. If bootstrap confidence intervals are also requested, the tebounds command first estimates bootstrap weights via the bsweights command. Bootstrap weights will also be calculated as part of the MIV bias correction. Attempts to call the survey option will result in an error if the user has not first declared the survey design with svyset.\nweights(#) indicates whether bootstrap weights have already been calculated. The default value of 0 indicates that bootstrap weights have not been calculated and will instead be calculated from within the tebounds command. The weights option is intended as a programming control to avoid replacing the estimates in ereturn at each iteration of the bootstrap. Should the user have pre-specified bootstrap weights available, the weights must be of the form bsw1 bsw2 ... bswN, where N denotes the number of bootstrap replications. 6 .\nnpsu(#) specifies the value of n(#) in the bsweights command. From the bsweights help files, this option specifies how the number of primary sampling units per stratum are handled. The default value of \u22121 indicates a bootstrap sample of size n h \u2212 1 for all strata, h (Kolenikov 2010) .\nnodisplay suppresses the summary results table. Results are still stored in ereturn.\ngraph specifies that ATE bounds be graphed as a function of the maximum rates of measurement error from erates.\nsaving(string) specifies a location and stub name for the saving the graphs.\nreplace indicates that previously saved graphs with the same name should be over-written."}, {"section_title": "Examples", "text": ""}, {"section_title": "US School Breakfast Program", "text": "Following Millimet and Tchernis (2013), we provide an application of the tebounds command to the study of the U.S. School Breakfast Program (SBP). Specifically, we seek bounds for the average treatment effects of SBP on child weight. The data are from the Early Childhood Longitudinal Study -Kindergarten Class of 1998-99 (ECLS-K) and are available for download from the Journal of Applied Econometrics Data Archive. 7 We partially identify the average treatment effect of self-reported SBP participation in first grade (break1 ) on the probability of being not obese in spring third grade (NOTobese).\nIn our application, we allow the maximum misclassification rate of program participation, Q, to be 0%, 1%, 2%, 5%, and 10%. We use an index of socioeconomic status (ses) as the MIV, and divide the sample into 20 cells. 95% bootstrap confidence intervals based on 100 replications are provided. The resulting Stata output follows:\n. tebounds NOTobese, t(break1) erates(0 1 2 5 10) ncells (20) As indicated by the section headings, the output presents the point estimates (p.e.) for the bounds for the ATE , as well as 95% confidence intervals (CI) under each set of assumptions concerning the nature of the selection process and the type of misclassification (arbitrary errors or no false positives). Moreover, within each panel, separate bounds are presented for each value of Q specified in the tebounds command (in this case, 0%, 1%, 2%, 5%, and 10%). A selection of the graphs produced are illustrated in Figures 1-3 .\nIn terms of the bounds, we see that the mean difference in outcomes across the treatment and control groups, assuming SBP participation is not misreported, is -0.059. This implies that participants in the SBP are 5.9% more like to be obese relative to non-participants. However, since the SBP is subsidized for low-income households, and low income individuals are more likely to be obese, the assumption of exogenous selection is not reasonable. That said, we also see that the assumption of exogenous selection is insufficient to identify the sign of the ATE if at least 2% (10%) of the sample misreport program participation under the assumption of arbitrary errors (no false positives). This result illustrates two important facts. First, the association between SBP participation and child weight is not robust to even small amounts of misreporting. Second, the assumption of no false positives provides some identifying information relative to the assumption of arbitrary errors. The worst case bounds, assuming no misclassification, have a width of unity and necessarily include zero. Admitting the possibility of misreporting simply widens the bounds. However, these bounds still include some large values for the ATE that may be useful to policymakers. For example, if the SBP program would pass (fail) a cost-benefit analysis despite assuming the ATE on child weight is -0.641 (0.359), then precise knowledge of the ATE is unnecessary.\nFor the bounds invoking the monotonicity assumptions, we only display the bounds assuming negative selection into the SBP in the interest of brevity. Under MTSn alone, we see the lower bound comes from the bounds obtained under exogenous selection, while the upper bound comes from the worst case bounds. Thus, the width of the bounds shrink relative to the worst case bounds, but still fail to identify the sign of the ATE. Under MTSn and MTR, the lower bound is replaced by zero.\n8 Thus, the bounds still fail to identify the sign of the ATE. The final two panels utilize the MIV assumption in addition to MTSn or MTSn and MTR. In both cases, we see that the bounds are strictly positive assuming that no more than 1% of the sample misreports treatment assignment. In these cases, we can conclude under fairly innocuous assumptions that participation in the SBP has a positive, causal effect on the probability of an average child being non-obese. This is an important policy finding, and is consistent with alternative estimators discussed in Millimet and Tchernis (2013) that point identify the ATE under stringent assumptions. That said, the sensitivity of the bounds to classification errors is noteworthy and highlights the econometric importance of even relatively infrequent misreporting."}, {"section_title": "Monte Carlo", "text": "To further illustrate the tebounds command, we undertake a simple Monte Carlo exercise. We simulate 10,000 data sets with 2,000 observations from the following data-generating process: The population ATE is approximately 0.4. z is a valid MIV as both potential outcomes are increasing in z. The presence of leads to negative selection into the treatment. The misclassification rate is 10% and is arbitrary.\nThe results are summarized in Tables 1 and 2 , where the MIV bounds are obtained using 20 cells. Table 1 reports the coverage rates (i.e., the fraction of simulations where the bounds encompass the true value of the ATE). Not surprisingly, the exogenous selection bounds fail to cover the true value even when a maximum misclassification rate of 10% (the true value in the population) is allowed. In all other cases, the bounds always include the true value of the ATE, even when the incorrect assumption of no misclassification is imposed. Table 2 focuses on one aspect of the information that is potentially learned from the partial identification approach: the sign of the ATE. Specifically, Table 2 reports the fraction of simulations where the bounds are strictly positive (i.e., able to exclude zero and produce the correct sign of the ATE). Focusing on the bounds that utilize the various monotonicity assumptions, we see that the bounds obtained with (without) the MIV assumption are able to correctly sign the ATE in 95% (89&) of the simulations under the assumption of no misclassification. However, when we allow for the true rate of misclassification in the population, the bounds always include zero. It is important to note that while the bounds obtained under monotonicity and the assumption of no misclassification exclude zero in the majority of simulations and always contain the true value of the ATE (see Table 1 ), there is nothing that guarantees this will always be the case. Thus, one should avoid drawing the conclusion from this simple illustration that it is acceptable to focus on the bounds obtained under the assumption of no misclassification when, in fact, misreporting is a feature of the data. "}, {"section_title": "Remarks", "text": "The tebounds command provides a means to partially identify the average treatment effect of a binary treatment on a binary outcome under a variety of assumptions concerning the nature of the self-selection process and the nature and frequency of misreporting of treatment assignment. The binary outcome should be defined such that Y = 1 corresponds to the desirable outcome. Confidence intervals are available following Imbens and Manski (2004) ."}]