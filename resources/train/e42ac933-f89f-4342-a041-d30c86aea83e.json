[{"section_title": "Abstract", "text": "niques. The calculated acceleration profiles are evaluated using experiments with a laser-based sensor and recordings by a video camera. The performance is better than previous ad-hoc controllers. Figure 2 Block diagram of the motion control system."}, {"section_title": "Introduction", "text": "This paper considers movement of open containers containing liquid, which is a common operation in the packaging industry. Improved movement methods are crucial for optimizing packaging cost and profit. Today it must also be possible to use the same packaging machine for quite different products and it should be possible to change production quickly. Optimization of movement profiles is therefore an important and demanding challenge.\nThe operation of a packaging machine can be divided into three independent sub tasks: folding, filling and sealing. These tasks are performed simultaneously on three different packages, see Fig. 1 .\nThe folded package is placed in a holder that carries the package through the machine. The movement is performed stepwise, the number of steps between the different sub tasks depends on the machine type. The same movement is applied in every step on all packages. The time it takes t o produce a package is determined by the filling time and the time it takes to move the package one step.\nThe packages contain liquid when they are moved between the filling and the sealing stations. The movement induces liquid motion in the package. This is what we refer to as slosh. The amount of slosh depends on how the package is accelerated and on the properties of the liquid. There are large differences between skim milk and yoghurt.\nIf there is too much slosh the liquid might splash on the surfaces that should be be sealed. This can result in packages that are not properly sealed and possibly not airtight. If the package is not airtight the storage time is decreased considerably. This is particularly critical for aseptic packages, which are supposed to have a very long storage time.\nA block diagram of the motion control system is shown in Fig. 2 . It is (today) not realistic to measure the slosh on-line on the final commercial system. The reference is specified as an acceleration profile which is integrated twice to generate a position reference. The only measurements that are available to the servo system are the position and velocity of the package. Therefore, the only way to control the slosh is through the acceleration reference.\nThe problem is to calculate an open-loop acceleration profile that moves the package one step on minimum time with acceptable slosh. During the movement 0-7803-5446-X/99 $10.00 0 1999 IEEEthe slosh has to be bounded below a certain level. The same acceleration profile is applied at each step. Therefore, the acceleration must be such that the slosh constraint is not violated when the acceleration profile is repeated. One way to achieve this is to ensure that the slosh is in the same state at the beginning of each movement step. The natural choice of initial state of the slosh is that the liquid is at rest, since this is the state aRer the package has been filled.\nAn industrial testbed has been used where a carriage is mounted on a belt driven by a servo system similar to the one in the packaging machine. The container, an infrared laser displacement sensor, used t o measure the surface elevation, and a small video camera is mounted on the carriage. Photographs of the testbed is shown in Fig. 3 .\nThe problem is solved by first deriving a model of the slosh and then applying optimal control techniques to calculate the acceleration profile for the container. The control performance is then evaluated by experiments. A more detailed description of the problem and solutions to the movement problem when the package is moved only one step is found in [7] . An early version of the results in the present paper can also be found in IS]."}, {"section_title": "Slosh modeling", "text": "Modeling of the sloshing behavior of liquids in externally excited containers has been studied in several applications, e.g. fuel slosh in aerospace applications, vehicle and ship dynamics, earthquake engineering and movement of containers. The choice of slosh model is nontrivial. The most advanced detailed model is described by a set of three dimensional nonlinear partial differential equations (PDE). Such models are hard t o use in controller design, but can be useful for simulation and analysis. The nonlinear effects are important for very rapid movements when the surface elevation is large. Two nonlinear phenomena can be observed in experiments with large slosh amplitudes: the oscillation is asymmetric and the oscillation frequency is slightly amplitude dependent (the oscillation frequency increases with decreasing amplitude). More complicated nonlinear models must be used to capture these effects, this is not discussed here. In Fig. 4 a video recording of the liquid is shown when the following acceleration is applied. The solutions to (7) can be written as"}, {"section_title": "Calculation of acceleration profiles", "text": "where @(t) = eMt.\nInsertion of x ( 0 ) = 0 in (9) gives\nwhere @1:4,5:8 means the sub matrix with row 1 to 4\nand column 5 to 8 of 0. Evaluation of (10) at time T gives"}, {"section_title": "n(o) = [ Q~~,~~( T ) I -~~( T ) (12)", "text": "The optimal control u(t) is hence shows that the acceleration profile performs very well.\nSince the residual slosh is small the performance is independent of the time between the movements (i.e. the filling time). Therefore the same acceleration profile works even if the filling time is changed. "}, {"section_title": "Conclusions", "text": "An industrially relevant problem has been described where an open container with liquid should be moved quickly without excessive slosh. A linear model has been used t o model the slosh and it is shown that some of the nonlinear effects can be compensated by modifying the parameters in the linear model. The problem has been solved using techniques from optimal control both numerically and analytically. The calculated controllers have been implemented and verified in an industrial testbed and give better performance than previous controllers. The main advantage is that this is a systematic way to calculate good acceleration profiles instead of the old ad-hoc methods. Future work includes modeling of the nonlinear effects and application of the method on other liquids and package geometries. The developed methods are now being used in industry with good results."}]