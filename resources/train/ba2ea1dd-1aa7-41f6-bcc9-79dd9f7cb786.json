[{"section_title": "Introduction", "text": "The Sea Lake and Overland Surge from Hurricanes (SLOSH) model computes hurricane storm surge based upon two inputs. One is a parameterization of the hurricane wind field, and the other is a representation of the portion of the world of interest, also known as the SLOSH \"basin\". A SLOSH basin consists of a grid definition, as well as various geographic features such as height/depth, trees, barriers, etc used to control, route, and impede the flow of water as the hurricane impacts the area. A basin can be a polar, elliptical, or hyperbolic grid and is centered on the area of interest. The grid is set up to give fine resolution in the primary area of interest, and coarse resolution in the boundary region. There are currently 38 operational basins covering at risk coastal communities. Since coastal elevations change (new roads are built and dunes erode during major hurricanes) and better datasets become available, the SLOSH basins need to be updated periodically. This handbook describes the methodology and processes used to update an existing basin, or to create a new one."}, {"section_title": "Basin Development Process", "text": ""}, {"section_title": "Create or Modify Basin Definition", "text": "The first step in updating a basin is to configure the grid. In most cases an existing grid will be updated. The existing grid definition can be used as is, or modifications can be made. Modifications may include increasing the resolution or expanding the grid to cover a larger area. How to manually modify a grid: 1. Locate the current grid definition. It should be in one of 3 files called: \"basins.dta\" (polar grid definitions) \"ebasins.dta\" (elliptical grid definitions) or \"hbasins.dta\" (hyperbolic grid definitions). If you have installed the SLOSH display program, they may be in \"c:/slosh.pkg/sloshdsp.140/sloshbsn\".Open the file for editing. Notepad is good here since the files are very specific about formatting, and they need to be saved as ASCII text files. 2. Copy the previous basin line and paste it into a new line. If you are not making any modifications to the definition then simply change the basin abbreviation and description, and leave everything else the same. 3. Change the appropriate attributes. See Figure 1 for each .dta file format with the attributes labeled. Please make note of the character spaces as the file formats are very specific. Example: To halve the grid cells for a polar basin Take Origin i, Origin j, Min i, Max i, Min j, Max j, terms and apply the following to them: \"New value = 2 * (Old Value -1) + 1\". Then divide the resolution term by 2."}, {"section_title": "Convert .dd3 to Shapefile", "text": "As discussed in the previous section, changes are not always made to the basin definition. If this is the case, the developer should access the existing data in the basin and modify it with new information. The existing database is most likely in a .dd3 file, which is a binary file format (i.e, not readable as text) designed for the Worksheet program. The Worksheet program is a DOS program which was developed specifically for displaying and editing SLOSH basins. We have moved most of the basin development tasks into ArcGIS; however we continue to use the Worksheet program for its error and consistency checking. In order to edit the data in ArcGIS we must convert the .dd3 file into .shp files. The current method for converting .dd3 files into a .shp files is the \"Buddy3\" program. One option of the program is to convert a .dd3 file into a set of shapefiles. The shapefiles which Buddy3 creates are as follows: xxx_grid.shp, xxx_oset.shp, xxx_barr.shp, xxx_cut.shp, xxx_flow.shp, xxx_hght.shp, xxx_mid.shp (the \"xxx\" is the basin three or four letter identifier). The shapefiles will be populated accordingly with the existing basins data. In the event that the basin grid definition is modified, it is not possible to use the previous basin's data directly because the cell sizes and/or location will no longer match up. Buddy3 is still useful in this case as it allows us to generate \"empty\" shapefiles based only on the basin definition. A majority of the data fields will be empty in these shapefiles; however the program will populate the grid information, such as the poly_id, i_index, and j_index columns. The usefulness of this information will be described later as each shapefile is discussed in detail."}, {"section_title": "Instructions for using Buddy3", "text": "To convert a .dd3 file to shapefiles, open a command prompt and enter the following:"}, {"section_title": "\\marine\\BNT -bsn xxx", "text": "Parameters: -DD32Shp: the location and name for the new shape files. -dd3File: location and name of the DD3 file to be converted (this is unnecessary if you are creating empty shapefiles from a new basin definition). -bsnDir: folder location of the basins.dta, ebasins.dta, and hbasins.dta files. bsn: three or four letter basin identifier, must match what is in the .dta file Please note: the ebasins.dta displays \"HATe\" but Buddy3 requires \"ehat\"."}, {"section_title": "Data Collection", "text": "A vital part of the development of SLOSH basins is the collection of quality datasets. One of the reasons for updating the basins is to incorporate higher resolution datasets into the basin as they become available. Research must be done for each area to find the latest datasets. These datasets must be verified and compared to ensure quality. Good comparison tools include ESRI's raster calculator and the zonal statistics tool. The following are datasets that should be downloaded and used for basin development. To determine which area should be downloaded, we recommend loading the basin definition into ArcMap. Please Note that understanding datums is critical to working with a variety datasets. SLOSH has historically used NGVD29 for the vertical datum, but basins created post 2007 have shifted to using NAVD88 for the model's reference vertical datum and NAD83 for the horizontal datum. We anticipate phasing out the NGVD29 basins over the next few years as existing basins are updated. It is important to note and document the datums for each dataset, and if needed, make sure it is converted to match the set standards of NAD83 and NAVD88."}, {"section_title": "National Elevation Dataset (NED)", "text": "\"The USGS National Elevation Dataset (NED) has been developed by merging the highestresolution, best quality elevation data available across the United States into a seamless raster format. The dataset provides seamless coverage of the United States, HI, AK, and the island territories. The NED has a consistent projection (Geographic), resolution (1 arc second), and elevation units (meters). The horizontal datum is NAD83, except for AK, which is NAD27. The vertical datum is NAVD88, except for AK, which is NGVD29. The NED is a very dynamic dataset which is updated bimonthly to incorporate the \"best available\" DEM data. As more 1/3 arc second (10m) data covers the US, then this will also be a seamless dataset.\" -from ned.usgs.gov Much of the elevation data gathered for values above 0ft is from the NED. The NED are replaced when higher resolution, better quality datasets are found. The 1 arc-second and 1/3 arcsecond data should be compared for each basin. Comparisons for the last several basins have highlighted very little difference between the two datasets. When this is the case 1 arc-second should be used as the size of the dataset is much smaller, thereby, much easier to work with. Instructions for NED download: 1. Go to http://seamless.usgs.gov/website/seamless/viewer.php 2. Use the viewer to download the appropriate area for your basin. a. When downloading data this site defaults to the 1 arc second dataset. 3. Unzip and load the files into ArcMap. 4. Mosaic them using the \"Mosaic to New Raster\" tool in the Data Management toolbox. a. Make sure 32_BIT_FLOAT is selected in the Pixel Type drop down list."}, {"section_title": "National Geophysical Data Center (NGDC) Bathymetry Data", "text": "NGDC's Bathymetry Data provides a comprehensive coastal relief dataset with a 3 arc-second resolution. The dataset extends well into the oceans, serving bathymetric data needs well. These data are applicable for most areas in the basins less than 0ft. a. Please note the other available models-a different model may be more appropriate depending on the basin location. Always check to see if a tsunami dataset is available as it has a much higher resolution. 3. Open the GEODAS program and then click File, Design-a-Grid. 4. Select the best available grid database (in most cases only US Coastal Relief Model 3 Second Grids will be available). 5. Enter latitude and longitude limits for the desired grid. 6. The remaining boxes should be filled in as follows: Grid cell size: 3 seconds; Precision: tenths of meters; Number Type: 4-byte floats; Empty grid-cell value: 999999; Output Grid Format: ASCII Raster Format. Click okay. 7. Retrieve the data file by clicking the link on the web page. 8. Click Ok and designate a name and folder to save the new file to. 9. Convert the file from ASCII to raster using ArcToolbox. (Specify the output data type as FLOAT.) a. Please note: These data are in meters."}, {"section_title": "Tsunami Datasets", "text": "High resolution tsunami datasets can be found at http://map.ngdc.noaa.gov/website/mgg/dem/viewer.htm . These datasets are very helpful as they have been through a thorough quality control process and are accompanied by reliable metadata. Unfortunately, the datasets are much smaller than the typical basin but they can easily be mosaiced into a larger dataset. Please note that these datasets are in MHW. The accompanying report provides a conversion value between MSL and MHW."}, {"section_title": "LiDAR Datasets", "text": "LiDAR (Light Detection and Ranging) data provides high resolution topographic data. These data are costly to collect and only available in selected areas. Developers use LiDAR data primarily for the shoreline areas, as the high resolution data are very useful in determining barrier heights. NOAA's Coastal Services Center is a good source for LiDAR, as they host many different datasets on their LDART system. When using this data is it important to confirm the data is bare earth. This type of dataset frequently contains buildings and tree tops, neither of which should be counted toward barrier heights. "}, {"section_title": "Costal Services Center Download-LDART", "text": ""}, {"section_title": "Digital Raster Graphics (DRG's) -TOPO! National Geographic Data", "text": "Throughout the basin development process it is helpful to have a comprehensive reference map displayed. The National Geographic DRG's serve this purpose well. These DRG's are a seamless dataset of the U.S. Geological Surveys topographic maps, showing contours, roads, rivers, etc. These DRG's are referenced throughout the basin development instructions. Downloading TOPO! National Geographic Data: 1. Install TOPO! 4.0 and TOPO! Professional Suite for ArcGIS from the software CD. 2. Go to http://www.topopro.com/web_forms/feedback/support.asp to install the necessary patches, this should be installed before installing 9.2. 3. The TOPO! data are stored on an external hard drive. 4. In order for the TOPO! extension to know where to pull the data from, the shared drive must be mapped to a network drive. 5. Open ArcMap, Tools, Extensions. Check the boxes next to TOPO! Image Support and Multi-Layer Extension. 6. Right click on an ArcMap toolbar. Click TOPO! for ArcGIS. 7. Click TOPO! for ArcGIS on the toolbar. Click Set Local Directory. Choose the location where you would like to save the metadata. 8. Click on New TOPO! 24k Layer. 9. Select all of the discs for the area you are looking for. (Please note: This list references the hard drive, not the TOPO CD's.) 10. Use the TOPO select arrow to select the desired area. 11. Click on Editor, stop editing. Save your edits. This program does not run flawlessly. If a run time error appears, try importing the data into a brand new map. If this does not work try \"Modifying\" the program. This can be done in the Control Panel under Add/Remove programs. Support Information can be found at: -http://www.topopro.com/support/TOPOPROARCGIS_USER_GUIDE.pdf -http://www.topopro.com/support/FAQ-ArcSuite.pdf"}, {"section_title": "Data Documentation", "text": "Data documentation is also crucial in the data collection process. It is important to know when, where and what was collected so that we can easily reference the data whenever a pertinent situation arises. 2. Start a new SLOSH Basin Development Steps document. 3. On the second page of the Development Steps document make sure to include the following: a. Web addresses for downloaded data and the dates on which the data was downloaded. b. Contact information for specialized data (specifically data that has been shipped to us). c. Copies and dates of specific questions sent to the customer (Will and Arthur) and/or the Hurricane Center."}, {"section_title": "Datum Conversion Process", "text": "Frequently, the best available data for the bathymetry of a basin does not match the datum of the topography data, and vice versa. The difference in datum's becomes a problem in the next step when the two datasets are merged and averaged. Thus, it is necessary to convert all datasets to NAVD88 before any calculations are performed. The following steps explain how to convert datasets as well as observations made at sea level. 1. Add the NOAA Tide Gauge shapefile (it needs to include datum values for NAVD88 as well as the datum for the dataset to be converted). 2. Using the following calculation find the difference between NAVD88 and the data's datum (most likely MSL or MLW). o To convert the data datum to NAVD88 (the following discussion assumes the data is in MSL but the same process applies to all datums): Find the difference between NAVD88 and MSL at all possible tide gauges. \u2022 NAVD (10) -MSL (9.5) = DIFF (0.5) Find the average difference by adding together all of the tide gauges in the basin and then dividing by the number of gauges. Add the value algebraically (keep the sign) \u2022 MSL (2) + DIFF (0.5) = NAVD88 (2.5) Visit http://www.ngs.noaa.gov/TOOLS/Vertcon/vert_sign.html for clarification 3. When converting observations made at the sea level (frequently referred to as Current Sea Level by developers) complete the following: o Go to: http://coops.nos.noaa.gov/station_retrieve.shtml?type=Historic+Tide+Data o Select the closest tide gauge to the observation-ensure that the datum selected is MSL, the data unit is in feet, and the time zone is local. o Enter the data at which the observation was made then click on the 'Get Data' button o Scroll to the time at which the observation was made and take note of the value listed (1.5' means 1.5' above MSL) o If the value is positive, subtract is from the observation (observation = 9', corrected MSL = 7.5') o Apply the conversion value between MSL and NAVD to the corrected observation value."}, {"section_title": "Average Elevations", "text": "The SLOSH model requires an elevation value to be assigned to each grid cell. These elevation values determine at what storm surge height the cell will flood. These values are the basis of the model which is why the collection and analysis of data, as described previously, is so important. The SLOSH Basin Development team developed a custom model in ArcGIS to compute these values. To access the model you must load the SLOSH Development Toolbox into ArcMap. The model is called \"Pre-Merge DEM and Bathymetry Average Tool\". Open the model for editing and update the parameters with your data. Pre-Merge DEM and Bathymetry Average Tool Description: \u2022 SLOSH basin grid shapefile (created from Buddy3) \u2022 Output file name and destination Please note: By default, all of the files generated by this tool will be stored in C:\\work. An error will display if this folder does not exist. Also, the DEM and bathymetry data must be in the same vertical datum. This frequently means converting the bathymetry data from MLW or MLLW. The Costal Services Center has published a website and corresponding PDF relating to datum conversion process. Both can be found at http://www.csc.noaa.gov/topobathy/ The following bulleted items give a step by step explanation of how the model works. 11. Add fields: poly_id, i-index, j-index, Elev, HeightFt, Populate fields: (this data was generated in previous steps but the default column names are not correct so this step simply copies over the correct data into a well named column) poly_id, i-index, jindex, Elev, HeightFt 12. Delete Old Fields: deletes unnecessary columns. 13. Select data for final export: selects and exports the entire shapefile."}, {"section_title": "Momentum Points", "text": "Momentum points are located at the vertices of the grid cell. The value of the momentum point is the maximum height of the four surrounding grid cells. Momentum points are used by the SLOSH model to determine the flow of water across the surface. You do not need to calculate momentum points since they are based solely on the value of the grid cell heights, or the barrier points if they exist. Momentum points will be mentioned throughout the process, and are used to determine other pieces of the basin. Momentum points are in red in Figure 2. Both types of flows are saved in a single shapefile. They can be distinguished by the width values. 1-D full cell flows will always have a width of -1. Flows with channels will always have a width value between 0.1 and 0.9."}, {"section_title": "Flows & Cuts", "text": "Cuts are locations along a channel where the width of the flow with banks changes. These are entered into the database as the fraction (in tenths) of the cell width. The following is an example of where a cut is needed: a section of 1-D flow with banks where the width is 0.5 requires a cut when the river narrows to a cell width of 0.2. The cut represents the width change from 0.5 to 0.2."}, {"section_title": "A. 1-D Flow (Full Cell)", "text": "1-D Flow is added to the basin in instances when the maximum of two adjacent elevations values are less than the minimum of the corresponding momentum points, and water should be allowed to flow unimpeded. 1-D Flows are added at the mid-point of the grid cell. See Figure 2.  Currently, a python script (S:\\OST2_D\\OST25\\ArcGIS\\Tools\\Flows.py) denotes which midpoints (created by the Buddy3 process) should be 1-D flows. This script reads through the elevation shapefile and compares each cell elevation value to the surrounding values. If the maximum of the elevation values is less than the minimum of the momentum points, the script marks that cell. Selected mid-points are then exported into a new file and that is the basis of the flow input. The angle values are added manually after the flows have been determined. Because this process will introduce flows where a barrier is desired some of them will need to be manually deleted from the output. Further discussion will follow. Steps for Creating 1-D Flow (Full Cell) 1. Use the xxx_mid.shp from the Buddy3 -DD32Shp process (this will be a simple point file that has i_index, j_index, and side). 2. Open the Flows script in Python. 3. Replace file names in the \"##USER INPUTS\" section of the script. Need to input the elevation shapefile, the momentum shapefile, and the midpoint shapefile locations. 4. Run the script. 5. The point shapefile will now have values in the \"Flow\" field. 6. Select by attributes, \"Flow\" = 1. 7. Select and copy all of the Flows with the value of 1 into the empty xxx_flow file extracted from the Buddy3 program. 8. You will then need to go through your basin manually deleting any 1-D Flows that are not necessary. This will be in places where you would want a barrier rather than 1-D flow, such as levees or dunes."}, {"section_title": "B. 1-D Flows with Banks (Channels)", "text": "1-D Flows with Banks are added to cells where there are rivers or streams that do not cover the entire width of the cell. As shown in Figure 5, flows are added to represent the river. Flows should follow the meander of the river as closely as possible given the restrictions of the grid. Banks and Widths are the two additional attributes that must be added to flows representing channels. In the example below, the width is set to 0.2 because the river width spans approximately two tenths of the cell. The cell elevation values for cells with 1-D Flow with banks are set to the depth of the river, in this case -5 ft. The bank attribute represents the height of the banks along the river. If no bank height is set the model will assume that the banks are equal to the height of the adjacent cell. See Figure 6 for a cross section of three grid cells displaying river, bank, and land heights. Determining 1-D Flows with Banks (Channels) Several different layers are used to determine where 1-D flows with banks are necessary; specifically these layers highlight channels, rivers, and streams. The most helpful layer is the Digital Raster Graphic (DRG) from National Geographic. The NWI river polygons and NGDC Bathymetry datasets are also helpful. The basin developer manually works through the basin and determines which rivers need to be added. In this step the developer is looking for water flow that is less than a grid cell wide. Rivers wider than a cell should be represented in the elevation cell average. Fill in the appropriate attribute information, specifically Width, Bank1, Bank2, AT, and Angle. In order to get the Poly-id, i, and j values you can wait until you are finished and run the Identity tool, located in the SLOSH Development toolbox. 6. While adding 1-D Flow with Banks, the cell elevation value should also be changed to the depth of the river. Use the bathymetry data to determine the depth of the river. Please note: bathymetry is rarely available for smaller rivers and streams. Channels depths for areas without bathymetry information will need to be estimated."}, {"section_title": "C. Cuts", "text": "Cuts are used to connect 1-D Flow with Banks of varying widths. Cuts are added at the midpoint of the grid cell. See Figure 7. "}, {"section_title": "Attributes of Cuts", "text": "Poly-id: A unique id assigned to the cell to assist with merging. Poly_id is used only in the .shp files, not in the model. i_index, and j_index: The index of the cell which the cut is going into. Side: A numerical value (1-4) based on the location of the cut. See Figure 3. Angle: The angle of flow across the edge. Angles must be between -90 and 90. See Figure 4. AT: Represents the friction at the cut. A value of 0 represent a cell with no trees, while 1 represents the presence of trees. Width: The minimum of cut1 and cut2. Cut1: The width of the river in which the cut is going into. Cut2: The width of the river in which the cut is coming from."}, {"section_title": "Determining Cuts", "text": "Cuts are determined in the same manner as 1-D flow with banks, by scanning the DRG to find the point at which rivers change widths. It is most efficient to add them at the same time as the 1-D flow with banks. Anytime the width of a river changes by a tenth of a grid cell, a cut should be added. A frequent example of the need for cuts is at the mouth of rivers when the model goes from full cell flow over ocean to 1-D flow with banks. Steps for Creating Cuts 1. Use the xxx_Cuts file created from the Buddy3 program. 2. While adding 1-D flow with banks add cuts where necessary, snapping the cuts to the midpoint shapefile. 3. Fill in the appropriate attribute information, specifically Side, Angle, AT, Width, Cut1, and Cut2. See Figure 8 for attribute examples. In order to get the Poly-id, i, and j values you can wait until you are finished and run the Identity tool located in the SLOSH Development toolbox. 4. There should never be a cut and a flow at the same point. You may have to delete flows that were automatically created by the flow script. 5. When adding Cuts, the cell elevation value should also be changed to the average depth of the river. Use the bathymetry data to determine the depth of the river. Please note: bathymetry is rarely available for smaller rivers and streams. Channels depths for areas without bathymetry information will need to be estimated. "}, {"section_title": "Barriers", "text": "Barriers are required when the average elevation of a cell does not represent a significant peak found within the cell. Examples include levees and barrier islands. Levees are manmade, narrow, linear structures that maintain an elevation significantly higher than that of the surrounding area. Because levees are usually narrow in comparison to a grid cell, they are frequently not reflected in the cell average. A barrier must be added to alert the SLOSH model that water will not go through the cell until it overtops the barrier height. Barrier islands behave similarly as they frequently have dunes with a peak higher than the cell average. Barriers are also needed when channels touch another body of water because channels can't be added in a location where the momentum point, or the maximum value of the four surrounding cells, is less than or equal to zero. This is also an issue when two channels run side by side. For example, the Intercoastal Waterway runs along the Gulf of Mexico in many areas. In these cases, a barrier should be added between the two water bodies, whose height is the land elevation between the waterways (a cross section is a good way to find this information). Barriers should be used instead of banks in these cases because a bank value does not change the momentum value but a barrier value does. Barriers are added at the vertex of the basin grid cells in the same location as the momentum point and will replace the momentum point value in the .dd3 file."}, {"section_title": "Attributes of Barriers", "text": "Poly-id: A unique id assigned to the cell to assist with merging. Poly_id is used only in the .shp files, not in the model. i_index, and j_index: The index of the momentum point at that location Elevation (ft): The height up to which the object will block water, for dunes this may be slightly lower than the highest elevation of the dune"}, {"section_title": "Determining Barriers", "text": "The National Geographic's Digital Raster Graphic (DRG) layer is used to spot possible barriers. The DRG often includes the location of levees, dikes, dunes, etc. The ESRI profile tool is then used to look at a cross section of the elevation data (high resolution LiDAR when possible). From these cross sections the developer is able to determine if a significant peak exists that is higher than the cell average. Another way to find possible barriers is through the ArcMap Slope tool, or simply changing the symbology of the DEM layer. A ridgeline identifying tool was created specifically for locating barriers. Separate documentation is available for this tool. Steps for Creating Barriers 1. Use the xxx_barrier.shp created from the Buddy3 program. 2. Scan the National Geographic DRG File to locate possible barriers. Also use the elevation raster (change the display by classifying the values), to locate possible barriers. Check every cell along the coast line for dunes. 3. Use ArcGIS's 3D Analyst extension to check for possible barriers. 4. Draw a profile line from the water body inland. Developing a pattern is helpful when it comes to reading the graph."}, {"section_title": "Press the Create Profile", "text": "Graph button on the 3D Analyst tool bar. 6. Using the graph, assign a value to the barrier. Make sure to take note as to whether the data are in meters or feet. It may help to use raster calculator to convert the data from meters to feet. 7. Right click on the graph and select \"Save to Graphic\". 8. Paste the graph into a new Word document. Record the cell the profile passes through, the data source, feet or meters, and the barrier height deduced from the image. 9. Add a new point to the barrier shapefile and fill in the height attribute with the value deduced. You can populate the poly-id, i_index, and j_index by running the identity tool with the momentum shapefile after you are finished adding barriers."}, {"section_title": "Trees", "text": "Tree values inform the model of increased friction at the momentum points. Friction is important because it decreases wind speed and slows water flow. Tree values are broken up into three main categories: Land and Channels 4: High terrain: Greater than 36ft 1: Lake and tree: between 0 and 36 ft, forested land 3: Lake only: between 0 and 36 ft, non-forested land, as well as channels below 0 ft and bays below 0 ft Oceans 5: Ocean/shallow water: Greater than or equal to -29ft (This value should only be applied in oceans and gulfs. It is not meant for channels or bays.) 2: Deep water: Less than -30ft 7: Interior of Lake: OKE basin only Boundary values (along the edges of the SLOSH grid) are also designated through the \"tree\" specification 4: Solid Wall (no flow): All land: includes areas where river cross through the boundary 6: Static height: nominally, less than or equal to -30ft 8: Intermediate: nominally, between -30ft and -75ft (there should be fewer than five of these in a sequence) 9: Shallow: 0 to 30 ft Tree values are added at the corner points of the cells. The tree values are frequently determined by the momentum value for the particular point. However, for elevation values between 0 and 36 ft, the National Land Cover Dataset is used to determine if it should be Lake only (3), or Lake and Tree (1). Exceptions to the Default Tree Values 1. Shallow water values (9) are only meant for open water. Shallow water values automatically assigned to bays, rivers, and inlets should be changed to a lake value (3). 2. The number of Intermediate (8) and Shallow Water (9) boundary conditions must be limited on each side of the basin. The range of values for each number should be between 3 and 5."}, {"section_title": "Attributes of Trees", "text": "Poly-id: A unique id assigned to the cell to assist with merging. Poly_id is used only by the .shp files, not in the model. i_index, and j_index: The index of the momentum point at that location. Tree: Numbers 1-9 as determined from the previously discussed categories (land and channels, oceans, and boundaries). Boundary: The value of 1 distinguishes boundary points from interior points, 0. Steps for Creating the Tree Layer This tool performs the following steps: a. Reclassifies the NLCD data to 1(lake and tree), 3(lake only), or 2(open water) b. Using the numbers assigned by the National Land Cover Database. See Appendix 2 for the land cover class descriptions. 2=11 1=24, 41, 42, 43, 52, 91 3=21, 22, 23, 31, 71, 81, 82, 90, 92, 93, 94, 95, 96, 97, 98, 99 c. Zonal Statistics-calculates the majority statistics of the shifted grid cells d. Extract Values to Points: converts land cover raster to points (at the location of the momentum points) e. Adds a MOMENTUMFT Field. 3. Copy the Tree.shp file from c:/work to your local basin folder; you may want to rename the file to include your basin identifier, ex. bp3_tree.shp. 4. Run the S:\\OST2_D\\OST25\\ArcGIS\\Tools\\Tree.py script. This script will populate the Trees field in the tree shapefile. a. You must input the basin elevation shapefile, and the tree shapefile into the script before running it. 5. Add the tree shapefile to your map. You can symbolize the Tree shapefile by importing a symbolized template here: S:\\OST2_D\\OST25\\ArcGIS\\Shapes\\Layers. It is called trees_lake_barrier.lyr."}, {"section_title": "Validate Shapefiles", "text": "After all elements have been added to the basin, the error checking process begins. This is done once in ArcGIS, and then again in the Worksheet program. It is important to catch as many errors in the shapefile as possible before converting back to a .dd3 file because it is easier to edit in ArcGIS. Use the SLOSH Development toolbox to validate the shapefiles in ArcMap. 1. Calculate the poly-id, i_index, and j_index for the flows, cuts, and barrier shapefiles using the identify toolset. There are corresponding identify tools for each shapefile. 2. Run the all the tools in the Validation toolset. The tools included in this toolset use the following equations to check for errors: "}, {"section_title": "Convert Shapefiles to DD3", "text": "The worksheet program will catch some errors that the shapefile validation process does not catch. In order to do final error checking on the basin, the shapefiles must be converted back to .dd3 format. A python script is used for this step. Steps for Converting Shapefiles to .dd3 1. Open the S:\\OST2_D\\OST25\\ArcGIS\\Tools\\Shp2.dd3_polygon.py script 2. Replace the file path for the elevation, barriers, trees, flows, and cuts shapefiles in the script with the file location for your specific basin. 3. Replace the file path for the .dd3 file to be created."}, {"section_title": "Error Checking in the Worksheet Program", "text": "A major benefit of the Worksheet program is that it provides streamlined error checking of the basin file. The worksheet program displays flashing and/or red cells to alert the user of several types of errors or deficiencies. The worksheet program also creates a file called basin_name.err each time the program is initiated. It is located in the same directory as the .dd3 file. It is important to examine this file to confirm that all errors have been removed from the basin. Some of the rules that the Worksheet Program check include: 1. 1-D Flow (and 1-D Flow with banks) a. Side = 1-4 b. AT = 0 or 1 c. Channels cannot be added when a corner point is less than 0. d. Banks cannot be higher than the lowest surrounding cell. e. Angles must be between -90 and 90. f. Bank heights cannot be given to full cell flows. 2. Cuts a. Cut1 and Cut2 equal corresponding channel widths. b. Banks cannot be higher than the lowest surrounding cell. c. Angles must be between -90 and 90. 3. Trees a. Boundary conditions cannot be applied to interior cells."}, {"section_title": "Create a PDT File", "text": "A pdt file is required by the .dd3 to dta conversion process. Unlike the .dd3 file, the dta does not read outside files like ebasins.dta. This additional information is required for the basin transformation, also known as the basin definition. Thus, the basin definition must be added to the dta file itself. This is done through the use of a PDT file. The following steps outline the PDT file creation process."}, {"section_title": "Inputs", "text": "-The basins.dta, ebasins.dta or hbasins.dta file -The appropriate file must be stored in the directory from which the program is run. It must contain the basin call name for which you are generating the PDT file. Running the program 1. Open \"PDTGEN.EXE\" from S:\\OST2_D\\OST25\\marine\\PDT\\pdtgen in a Command Prompt 2. A prompt \"A PLOT FOR POLAR/ELLIPTICAL/HYPERBLOIC GRIDS ? (P/E/H)' requires that you enter the letter P,E, or H depending on whether the basin is Polar, Elliptical, or Hyperbolic 3. When prompted with: \"ENTER BASIN CODE\". Enter the 3-digit basin identifier, such as PV2. This must match the basin name as it appears in basins.dta, ebasins.dta, or hbasins.dta as appropriate. 4. Once the basin ID is entered, the program will return some of the transformation identifiers and say which basin was selected. The program will next prompt you \"DO YOU WANT TO GENERATE *.PDT FILE? (Y/N)\". Enter Y. 5. You'll next be prompted to \"enter file name (*.PDT)=', so enter the file name for this file. 6. This should result in a \"Stop -Program terminated.\" when completed. 7. The first 7 lines of this file will be used as the .pdt file input for defining the bsnDTA file."}, {"section_title": "Convert to DD3 Files to DTA", "text": "The SLOSH model inputs a DTA file for its basin database definition. Thus, the last step in basin development process is to covert the clean .dd3 file into DTA format. The files needed to convert to DTA are the basin .dd3 file, the .pdt file, and the .msc file. The .pdt file generating program is located in S:\\OST2_D\\OST25\\PDT. The .msc file is located in S :\\OST2_D\\OST25\\MSC. Find your previous basins .msc file and copy and rename it. A. Running the program from the s: drive 1. Open DosBox-mount c to the s drive and open the program, use the following commands: Z:\\>mount c s:\\ost2_d\\ost25 Z:\\>c: C:\\>cd marine\\basnmenu C:\\MARINE\\BASNMENU>3FW22G_L 2. Follow the programs prompts: Enter Basin Data Filename: c:\\marine\\ws\\xxx.dd3 Enter Projection Data Filename: c:\\marine\\pdt\\xxx.pdt Enter Miscellaneous data filename: c:\\marine\\msc\\ xxx.msc Enter Output filename for Merged data: c:\\marine\\temp\\XXXDTA 3. If the program runs without error, and the DTA file is complete make sure you move the DTA out of the temp folder to the marine/SLHBSNS folder. B. Finalizing the DTA: 1. Open the DTA and PDT files. 2. Note that the top few lines of the two files do not match like they should. 3. Delete the second time step line from the DTA. 4. Copy the line containing tangent information from the PDT file and paste it into the DTA file. 5. Save and close the DTA file. *If the listed errors include I and J values outside of the basin dimensions it is because the dimensions in the msc file do not match those of the basin. The following describes further additions that may be necessary for the first line in the DTA: -Start first run with a Category 5 hurricane 7. Click on the green signal on the toolbar. -Do 3 separate runs with the same time-step and hurricane by moving the hurricane track to make landfall at the top of your basin, middle and bottom. -Note: each time you do a run with the same hurricane it will replace the previous run, unless you change the name when saving the file. 8. After the initial runs have been completed change the time-step and run a less intense Hurricane. -Open the DTA file, use a text editor. -Make the time-step faster or slower by making sure that each number is divisible by 60 seconds. The higher the number the faster the run, the lower the number the slower the run. 9. Repeat step 7."}, {"section_title": "Things to look for:", "text": "-Does the storm run? Is there an obvious checkerboard/instability? -Do the envelopes look correct (inundation should be gradual from cell to cell)? To Examine the SLOSH Model run on the SLOSH Display program: 1. Open the Slosh.pkg folder on your hard drive. 2. Confirm that the basin definition is correct in the sloshbsn folder (.dta files). 3. Open the Slosh Display program. 4. Select your basin via the change-basin option. 5. Navigate to Animate, click on import REX from slosh/output folder. -Locate the appropriate hurricane rex file. 6. Navigate to Animate, click on animate REX and scroll down to the correct rex file and click start. -This will loop the run over and over unless you click pause and forward to end using side toolbar to view the envelope. -You can also import your DD3 file by holding down the CTRL + D key and navigating to the S: drive. (if this does not work ask Arthur to set this up)"}, {"section_title": "Submit to TPC", "text": "Once you have finished the basin dta file, and done a few successful test runs through the model you can submit the completed basin to TPC. Send them both basin dta file, and the .dd3 file. They will complete the simulation study on the basin. When they are complete we will get the MOMs and MEOWs back to update the SLOSH Display program."}, {"section_title": "Updating SLOSH Display CD", "text": "These are instructions on how to update the SLOSH Display CD with new basin MEOWs and MOMs when TPC provides completed simulation studies. 1) Update history.txt -Open history.txt (located S:\\OST2_D\\OST25\\CDS\\dsp-cd) -Add line(s) to history.txt regarded the basin you are adding, and the one you are retiring (if applicable) -Example: 10/27 JMS: em2,em2mom,em2trk added emo,emomom,emotrk retired 2) Update age.txt -Open age.txt (located S:\\OST2_D\\OST25\\CDS\\dsp-cd) -In the file, w = meow, m=mom, t=track, and f=florida. Uppercase means it was just an update not a full change. -If you are retiring a basin, cut the basin line from section one and paste it in section two. -Add a line with the new basin in section one, adding \"wmt\" to the current year column -In section 3 delete retiring basin line, and add the new basin at the end of the section -Examples: Remove from section one and paste in section two: 08 emo M W wmt Add to section one em2 wmt Add to section three <em2>Mobile Bay: Author:Andrea -> 10/27/2008 em2 wmt 3) Move old basin files and make new directories -Files are located S:\\OST2_D\\OST25\\CDS\\slosh_CD -If retiring a basin move the basin meow, mom, and trk folders to S:\\OST2_D\\OST25\\CDS\\slh_old -Add new basin directories to S:\\OST2_D\\OST25\\CDS\\slosh_CD Example: add new folders em2, em2mom, em2trk 4) Copy and Rename MEOW files using the renam3.tcl script -Copy low water MEOW files from the cd to the newly created directory in S:\\OST2_D\\OST25\\CDS\\slosh_CD -Run the renam3.tcl script on the low water meow files in cygwin Example: $ cd s:/ost2_d/ost25/cds/slosh_cd/em2 $ bash $ for file in `ls *.em2`; do ../dsp-cd/renam3.tcl $file 0; done $ exit -Create a temp folder in the basin meow folder and put the renamed low water meows into it -Then copy the high water MEOW file from the cd to the basin meow directory -Run the renam3.tcl script on the high water meow files in cygwin. The only difference between this and the low water renaming will be the second argument, it should be whatever the high water level for that basin is, it is different for each basin. Example: $ cd s:/ost2_d/ost25/cds/slosh_cd/em2 $ bash $ for file in `ls *.em2`; do ../dsp-cd/renam3.tcl $file 1; done $ exit -Copy the low water meow from the temp folder back to the main folder, and delete the temp folder 5) Copy MOM files -Copy the MOM files from the low and high water folders on the CD to the new basin mom folder in S:\\OST2_D\\OST25\\CDS\\slosh_CD -Rename the files manually in windows Example: From C1MOMiMean.em2 to c1_mean.em2 -Open a cygwin window, and go to S:\\OST2_D\\OST25\\CDS\\slosh_CD\\em2 -Run renam3.tcl, entering the file path 6) Copy Trk files -Copy trk files from either the high or low folder (they are the same) and place them in new basin trk folder in S:\\OST2_D\\OST25\\CDS\\slosh_CD -Switch the trk file names to be all lower case using tolower.sh in cygwin Example: $ bash $ for file in `ls *.trk` >do >s:\\ost2_d\\ost25\\cds\\bin\\tolower.sh $file >done 7) Update the master tracking files -Update s:/ost2_d/ost25/marine/bnt/sloshdsp.bnt Example: :p:ilm:ilm:Wilmington NC/Myrtle Beach v1:0 58 7 114:0 *:p:il2:il2:Wilmington NC/Myrtle Beach v2:-1:9999 (Update s:/ost2_d/ost25/marine/bnt/history.txt) -Update s:/ost2_d/ost25/marine/docs/Basin_Tracker.xls Example: Change ilm to Retired Change il2 to Operational, and provide Mar-08 for MEOW Creation date. -Check changes into repository 8) Update the SLOSH Display to use the new bnt file. $ cd /svn/slosh/sloshdsp $ vi .svnexternal (update the r number to latest one, check the subversion website for the latest version number) $ svn propset svn:externals -F .svnexternal . 4. Change the ArcMap project properties to Set Relative Path Names (File, Document Properties, Data Source Options) 5. Each project should follow a similar file structure to that displayed below: c. Basins i. Basin name 1. Shapes 2. Documentation 3. NED 4. NGDC a. Tsunami b. Bathy 5. CSC ii. Basin ArcMap project 6. Zip the remaining files making sure to keep the folder directory structure. 7. Move a copy of the zip file to the external terabyte drive, Roman."}, {"section_title": "Metadata Standards", "text": "1. At the completion of each basin the following shapefiles should include metadata: a. xxx_barr, xxx_cut, xxx_flow, xxx_grid, xxx_mid, xxx_mntm, xxx_oset, xxx_tree, xxx_obs b. A template has been created for each of these files and can be imported to save time. In ArcCatalog, select \"import metadata\" and browse to S:\\OST2_D\\OST25\\ArcGIS\\Documentation\\metadata.xml. 2. The following guidelines should be used to create the metadata for the files listed above: a. Abstract: Barrier in shapefile format for the SLOSH Charleston Basin b. Purpose: To be used to create the hch2dta file c. "}]