[{"section_title": "INTRODUCTION", "text": "Fuel slosh in spacecraft is a concern in at least two types of scenarios. Spacecraft fuel slosh can interact with the launch vehicle control system and cause unpredicted motions and reactions. Likewise, spacecraft control systems and sensors can be influenced by sloshing fuel or by fuel simply not being in the expected center of gravity location. Slosh effects can be categorized in two additional ways. The first deals with slosh caused by launch vehicle and spacecraft maneuvers and, if induced under an acceleration field, is usually some type of bulk fluid motion with a periodic component. The second is slosh induced by interaction with a spinning or rotating spacecraft. This type of slosh can be bulk fluid motion and/or subsurface wave motion (currents) and almost always is periodic because of the spin. In either case, an unpredicted coupled resonance between the vehicle or spacecraft and the on board fuel can have mission threatening affects. For example, missions have been lost because of uncontrolled growth in nutation driven by resonant fuel slosh. ' This paper describes the on-going research effort to improve the accuracy and efficiency of modeling techniques used to predict these types of motions. In particular, a comparison of some of the preliminary results with and without diaphragms is made to illustrate the effect of diaphragms and bladders on the slosh dynamics.\nHistorically, it has been possible to predict free-surface lateral slosh of bulk fluid motion with a great deal of confidence and accuracy using codes such as the Lomens and the Dodge programs. 2 The difficulty increases and the confidence will diminish when a diaphragm or a bladder is introduced into a fuel tank. These devices are used to separate the fuel from the gas tillage (usually pressurized) so as to ensure a pure liquid flow to the spacecraft engines. They have become very popular with spacecraft designers since they can guarantee smooth engine performance in any orientation and gravity field (or lack thereof). They also do a very good job of ensuring that a very high percentage of the available fuel is utilized. Both the Lomens and Dodge codes assume a pendulum as a mechanical analog for the slosh motion. Additional types of mechanical analogs (such as rotors and suspended masses) are being considered to develop a more generalized method of modeling fuel motion.\nNASA's Launch Services Program at Kennedy Space Center has developed several launch vehicle dynamic simulations that use parameters derived from these full scale tank tests. These simulations are based on the Matlab SimMechanics toolbox from Mathworks, Inc. 3 The basic mechanical analog used to date has been the pendulum for bulk slosh, with rotors added when needed to account for subsurface rotational waves. SimMechanics provides a library of masses, joints, actuators and sensors and can be used to quickly build up a large variety of different mechanical representations of the fluid motion.\nOn-going research effort is aimed at developing a method whereby the parameters can be derived directly from an arbitrary Matlab SimMechanics model of the mechanical analogs using the Parameter Estimator Toolbox.\n6 and 7\u2022 It has been found that the diaphragm shape can profoundly affect slosh behavior and that, surprisingly, many of these diaphragms will hold their initial shape throughout launch vibration and maneuvers. 8 Extensive analysis has been done on the different tank shapes and locations, as well as the use of PMDs. A summary of this analysis, like that reported by Hubert 9 shows the vast differences in possible behaviors of different designs. For example, a number of relatively simple mechanical models have been developed for cylindrical tanks with hemispherical end-caps mounted outboard of the spin axis. This type of tank has been popular in a number of spacecraft programs. Hubert also notes that one of the most difficult aspects of employing such mechanical models is in the selection of appropriate parameters in the model.\nOne of the most practical types of spacecraft propulsion fluid control devices has proven to be the diaphragm, which uses an elastomeric material to create an effective barrier between the pressurant gas and the liquid propellant. Main advantages of currently available diaphragms over other PMDs are that they are easier to manufacture and they are light weight.'\u00b0 Hopefully, future diaphragms will be able to collapse in a more repeatable folding pattern. This will further reduce the variability in finding spacecraft fuel slosh parameters and give a more certain location of the fuel tank (and hence spacecraft) center of gravity."}, {"section_title": "PROBLEM DEFINITION", "text": "Various simulation parameters are estimated by matching the pendulum/rotor model response to the experimental response of full sized test tanks in NASA's Spinning Slosh Test Rig (SSTR) located at the Southwest Research Institute (SwRI). Testing has been done to understand and measure the forces and torques generated by the fuel in both spinning and lateral excitation modes. Test rigs have been developed for both modes. The test rig (Figure 1 ) for the spinning mode Spinning Slosh Test Rig (SSTR) has recently been modified to allow testing of centerline mounted tanks (Figure 2 ). The SSTR can subject a test tank to a realistic nutation motion, in which the spin rate and the nutation frequency can be varied independently, with the spin rate chosen to create a centrifugal acceleration large enough to ensure that the configuration of the bladder and liquid in the tank is nearly identical to the zero-g configuration. The propellant motion is simulated using models with various parameters (inertia, springs, dampers, etc.) and the problem reduces to a parameter estimation problem to match the experimental results obtained from the SSTR. The data from these tests are used to derive model parameters that are then used in the slosh blocks of a MATLAB/SimMechanics-based spacecraft and upper stage simulation. Currently, the identification of the model parameters is a laborious trial-and-error process in which the equations of motion for the mechanical analog are hand-derived, evaluated, and compared with the experimental results.\nThe previous research used mechanical analogs such as pendulums and rotors to simulate sloshing mass as a common alternative to fluid modeling. A homogeneous vortex model of liquid motions in spinning tanks and an equivalent mechanical rotor model was developed by Dodge et al.\" An approximate theory of oscillations that predicts the characteristics of the dominant inertial wave oscillation and the forces and moments on the tank are described. A 3-DOF pendulum model was proposed by Green et al. 12 There was evidence of liquid resonance from the experimental data. The resonance was closely tied to the tangential torque and to a lesser degree to the radial torque, and there was little or no resonance in the force measurements. Green et al., proposed a rotary oscillator concept to simulate the torque resonance in tangential and radial directions. This rotary oscillator model was superimposed on the pendulum model to provide the overall response of liquid oscillation in the tank.\nThe previous research effort proposed was directed toward modeling fuel slosh on spinning spacecraft using simple 1-DOF pendulum analogs. The pendulum analog modeled is a spherical tank. An electric motor induced the motion of the pendulum via a locomotive arm assembly to simulate free surface slosh. A SimMechanics model incorporating the pendulum analog of the experiment was created. Parameters describing the simple pendulum models characterized the modal frequency of the free surface sloshing motion. The 1-DOF model helped to understand fuel sloshing and serve as a stepping stone for future more complex simulations to predict the NTC accurately with less time and effort."}, {"section_title": "METHOD OF APPROACH", "text": "The experimental set-up ( Figure 3 ) is directed toward modeling fuel slosh on spinning spacecraft using simple l-DOF pendulum analogs. "}, {"section_title": "FREE SURFACE FUEL SLOSH", "text": "An electric motor induced the motion of the pendulum to simulate free surface slosh. Parameters describing the simple pendulum models included pendulum length, pendulum hinge spring/damping constants, fixed mass and several other parameters related to the DC motor/locomotive arm assembly. The one degree of freedom model helped to understand fuel sloshing and serve as a stepping stone for future more complex simulations to predict the NTC accurately with less time and effort.\nFree surface slosh has a well defmed resonant frequency. The only sloshing motion assumed to be taking place in this simplified model is a surface wave that in turn is simulated by the pendulum. The rest of the liquid is essentially at rest and can be treated like a fixed mass. Initial pendulum properties are found by the use of a program developed by Dodge at SwRI. This \"Dodge\", or SLOSH, code predicts the modes of the fuel tank with that of a pendulum. 2 The tank/fuel parameters such as shape, kinematic viscosity, and liquid fill level are provided as input to the program. An illustration of the tank/pendulum definition along with values for various pendulum parameters for an 8 inch spherical tank is in Figure 4 . Using the tank/fuel parameters, the code can then determine the proper pendulum equivalent. The physical parameters given by the code include the liquid's fixed and pendulum masses as well as the pendulum length. First and second mode slosh data is also given by the code. The first mode parameters (sloshing mass) represent the majority of the propellant undergoing free surface slosh while the second mode represents a small correction factor for the first mode. This correction factor is an order of magnitude smaller than the first mode. Therefore, it can be added to the first mode mass with minimal error.\nThe code predicted that the maximum sloshing mass will occur at approximately 60% fill level as shown in Table 1 . While the simulation tested this entire range of fill levels, the l-DOF pendulum experiment was limited to test from 60-80% fill levels. This was due to the fixed mass constraint of the pendulum frame for the lower end and a tank fill restriction for the upper end.\nUsing the code's data distributions along with the geometric/material characteristics obtained from the experimental setup, a computer simulation of the one DOF pendulum analog was developed using SimMechanics software 3 as illustrated in Figure 5 . For laboratory testing, water is an excellent and frequently used substitute for hazardous propellants. Water's fluid properties (density, viscosity, etc.) are nearly identical to those of hydrazine, the most commonly used propellant. Figure 5 . SimMechanics model of 1-DOF pendulum.\nThe previous research was the first step to automate the process of slosh model parameter identification using a MATLAB/SimMechanics-based computer simulation of the experimental SSTR setup. The parameter estimation and optimization approaches were evaluated and compared in order to arrive at a reliable and effective parameter identification process. Currently some modifications and changes are being made in order to expand and further elaborate in this research validation. The introduction of diaphragms to this experimental set-up will aid for a better and more complete estimation systems on fuel slosh characteristics and behavior."}, {"section_title": "Slosh Code Natural Frequency Verification", "text": "Before an automated parameter estimation process can begin, the raw data from the experiment must be filtered. This is primarily due to noise from the DC motor and friction from the locomotive arm assembly. Matlab's Signal Processing Toolbox was used to filter the data.\n-r mom: -"}, {"section_title": "4'h1", "text": "Calculating the natural frequency of the tank at various fill levels was an effective way to verify the predictions of the SLOSH code. In order to determine the natural frequency, the tank was excited close it its predicted natural frequency. This can be determined visually as the fluid in the tank starts to slosh with a high degree of turbulence near its natural frequency. The excitation can be stopped and the fluid will be allowed to come to rest naturally once the vicinity of natural frequency is reached. As with a pendulum4 this natural motion provides the natural frequency. Figure 6 illustrates the natural damping of the fluid and the three states of the fluid during this test respectively. Figure 7 provides the unfiltered and filtered force data obtained from the experiments. Table 2 compares the natural frequency predicted by the SLOSH code to that measured experimentally. The SLOSH code predicts the natural frequency of the tank accurately. Error for all three tests averages about 3% greater than predicted. This is most likely due to wall friction in the water and the tank. The tank was tested with fill levels ranging from 60-80%. The lower boundary of 60% is about equal to the minimum weight of the pendulum assembly while the upper boundary of 80% is due to the maximum practical fill level in the tank assembly."}, {"section_title": "Parameter Identification Process", "text": "Before conducting parameter identification process, frozen mass testing (no pendulum) was executed. The first step was to identify all of the parameters relating to the control of the DC motor/locomotive arm that would directly affect simulation results. In this case, frozen mass was treated as the only parameter directly related to the SLOSH code's predictions. The parameter was well-known and the parameter estimation process can be checked with these known values. Two parameter identification approaches are used to determine the parameters. The first approach was conducted using Newton's method for nonlinear least squares. The second estimation method is a \"black box\" approach using MATLAB's Parameter Estimation Toolbox.\nStandard MATLAB M-code was used for the first approach to run Newton's method of non-linear least squares (MATLAB function: lsqnonlin). For the frozen mass test case, one primary and two secondary parameters are considered. These are frozen tank mass, angular velocity correction constant, and time delay. While it is obvious that the frozen tank mass is the primary parameter, the reason for the other two secondary parameters is less apparent. These parameters deal with a small phase-shift between the experimental and simulated data. Simulation operating parameters must be very accurate in order to obtain proper values for frozen mass and subsequently the pendulum properties. The angular correction factor constant is a minor correction applied to the operating frequency of the simulation to minimize the phase shift between the simulation and experimental data. This value is approximately \u00b1 4.0e-2 radls. The initial flywheel angle sets the starting angle of the flywheel. If not for this secondary parameter, the simulation would always start at a flywheel angle of zero radians. In reality, the flywheel rarely starts at this angle. Typical initial flywheel angle values, based on the standard data selection method, range from \u00b1 I radian. A lower and upper bound for each parameter must be given to the algorithm as well as conditions such as initial conditions, maximum iterations, maximum function evaluations, and parameter tolerances. The limits used in the frozen mass parameter estimation tests can be seen in Table 3 . Table 3 . Frozen mass test parameter estimation limits.\nThe convergence criterion is defined by:"}, {"section_title": "R=[abs(E)-abs(S)] 2", "text": "(1) Where,"}, {"section_title": "R =Residual E = Reaction forces obtained from the experiment S = Reaction forces obtained from the MATLAB simulation", "text": "The Parameter Estimator Toolbox refers to this residual as the \"cost function. For the frozen mass testing, the tolerance criterion for convergence of the residual was set to be lOe-7. The M-code parameter estimation results for a simulated frozen mass at 60% fill level at several different frequencies are shown in Error! Reference source not found. Table 4 . Figure 8 provides a comparison of the results between the experiment and the simulation. "}, {"section_title": "II", "text": ""}, {"section_title": "Figure 8. 60% Frozen mass parameter identification results using M-Code (F=1.855Hz).", "text": "The second parameter identification approach uses MATLAB's Parameter Estimator Toolbox. This toolbox provides a graphical interface enabling the user to use a powerful suite of optimization tools. The first step in using the parameter estimator is to prepare the SimMechanics model. The estimator requires that the simulation has an output block so that it can extract output data (tank reaction force) from the model and compare it with the transient, or measured data. An optional input block can also be incorporated into the simulation. This enables the user to specify a specific frequency scheme if desired. Since these tests are performed at a constant frequency, an input table was not used. Each parameter (frozen mass, angular velocity correction, and initial flywheel angle) must also be supplied to the MATLAB workspace before starting the Parameter Estimator Toolbox. The measured data is imported from a spreadsheet as an input (if desired)/output data vs. time dataset. Each dataset must start and end at the same time and have the same number of data points. For example, if a test is run for 20.00 seconds with a data collection rate of 10 ms, each column would have 2001 data points starting at 0.00 seconds and ending at 20.00 seconds. Figure 9 shows a comparison of the optimized solution with the measured data. The Parameter Estimator results for a simulated frozen mass at 60% fill level at several different frequencies are shown in Table 5 .\n.iliJ\nPeW.ee Tb ) Figure 9 . Real-time measured vs. response plot (F=1.855Hz) Table 5 . Parameter estimator toolbox results for 60% frozen fill level.\nThe same method used to estimate the frozen mass parameters was then used to estimate the pendulum parameters on a liquid-fill tank with no PMDs undergoing free surface slosh. Pendulum length and pendulum spring/damping coefficients were added in addition to the parameters in Table 5 . Limits for the pendulum length were set to be +1-20% of the length predicted by the SLOSH code while the other limits were similar to those shown in Table 4 . Table 6 . Comparison of 60% pendulum results for the two parameter estimation methods."}, {"section_title": "Parameter Estimation with Different Liquids", "text": "The first step is to experiment with several liquids with different viscosities in order to better understand the lateral fuel slosh effects. Liquids of varying viscosities (Table 7) and physical characteristics different from water are used. It is assumed that for higher viscosities the resonance frequency is slightly higher that the predicted value for an ideal liquid."}, {"section_title": "Liquid", "text": "Viscosity (Poise) Water 0.01"}, {"section_title": "Glycerine 13", "text": "Corn Syrup 22 Table 7 . Comparison of viscosities of different liquids.\nThe SLOSH code was also utilized to obtain the model characteristic and properties for the new liquids. Using the same tank geometry and different fill levels, the SLOSH code provided mechanical system properties and they were compared with the previous results obtained with water. Table 8 illustrates the SLOSH code output for the liquids in the experiment. Table 8 . Slosh code prediction for all tested liquids."}, {"section_title": "Glycerine Corn Syrup Water", "text": ""}, {"section_title": "______", "text": "As predicted with the SLOSH code output, damping is a critical parameter when comparing the liquids with different viscosities. Parameters such as the slosh frequency and pendulum length remain the same for all liquids regardless of their viscosities. Modeling the system with a diaphragm will help to better understand the damping effects on the system. The SimMechanics model was updated and adjusted for simulation using liquids other than water. As mentioned before with the aid of the Dodge Code the pendulum properties were determined for each of the liquids. Under free surface slosh conditions, the mass differences were accounted in the model. The parameters to be estimated are the initial flywheel angle, the angular velocity correction, the pendulum hinge spring constant and the pendulum damping constant.\nAfter obtaining the experimental data for the different fill levels (60%, 70% and 80%) for both glycerine and corn syrup, the experimental data was then imported to the Parameter Estimation Toolbox. With the use of MATLAB Parameter Estimation Toolbox, the simulation for glycerine and corn syrup under free surface slosh conditions were simulated. Figure 10 illustrates the comparison between the experimental data and the simulated data for glycerine at 60% fill level. Figure 10 . Glycerine 60% Fill Level 1.75Hz\nThe same procedure was followed to test and simulate the corn syrup 60% fill level conditions (Figure 11 ). Tire (sec) Figure 11 . Corn Syrup 60% Fill Level 1.75Hz\nAfter obtaining the simulated estimation, it can be compared with the results previously acquired with water at same fill level. The following table illustrates all three liquids results obtained with the MATLAB Parameter Estimation Toolbox. The results (Table 9 ) were compared and some of the values were as expected yet the damping value for glycerine was surprisingly lower than expected. The spring stiffness, on the other hand, increased as we tested each of the liquids. "}, {"section_title": "I Tank Simulation (Parameter Estimation)", "text": ""}, {"section_title": "FUEL SLOSH WITH DIAPHRAGM", "text": "The current research is utilizing the previous modeling of fuel slosh for the introduction of a diaphragm and its effects to the whole system. The experimental set-up proposed is to study the effects of slosh under a diaphragm is shown in Figure 12 . A plexi-glass transparent spherical fuel tank with a diaphragm will be mounted on a fixture that will be linearly oscillated using a shaker. The forces due to fuel slosh will be measured using a force transducer mounted on the fixture. Noise will be filtered from the measured data. The proposed research on lateral fuel slosh modeling and parameter estimation will be a natural extension of the on-going research and will focus on two aspects:\n\u2022 Understanding fuel slosh with various liquids \u2022 Understanding how a diaphragm effects fuel slosh Figure 12 . Schematic diagram of experimental set-up with the diaphragm."}, {"section_title": "Introduction of Diaphragm", "text": "The flexible diaphragm will be attached to the periphery of the tank wall. Because of the geometric constraints, a flexible diaphragm is most commonly used in spherical propellant tanks. Diaphragms provide a substantial level of slosh damping as a result of the combination of viscoelastic flexing of the diaphragm and the increased viscous effects at the liquid-diaphragm interface. 15 A diaphragm also increases the slosh natural frequency because of the constraints imposed on the free surface shape. The effective mass of liquid participating in the sloshing is slightly smaller than for a tank of the same shape and fill level without a diaphragm. The nutation characteristics of the whole system also depend on the dissipation induced by the liquid viscosity, as well as on the presence and damping characteristics of PMD.'6\nThe introduction of a PMD in the propellant tank, in this case a diaphragm, could involve more complicated behavior than the previously researched free surface slosh. By utilizing a similar step-by-step approach as what was used for the free surface slosh, incorporating a diaphragm into the simulation may lead to better parameter identification of this type of system. The stiffness of the diaphragm in the tank is one of the parameter in the system that was not previously present in the former experimental set-up. This will be yet another parameter to be either experimentally determined and/or calculated with the computer estimation tools. Also including the stiffness effect of the diaphragm to the SLOSH code to predict the slosh changes expected in the tank, will be needed to compare the previous results without the diaphragm."}, {"section_title": "Diaphragm Testing", "text": "The new tank including a diaphragm ( Figure 13 ) was filled with water to a 60% fill level. To determine the natural frequency of the tank including the diaphragm, a damping test was executed utilizing the experimental set-up. With the use of the locomotive arm assembly, the tank was excited close to its natural frequency.\nThe natural frequency calculated based on the experimental data obtained was of about 2.08Hz. When comparing the experimental natural frequency calculated with the SLOSH code prediction for the same fill level at free surface slosh, the percent difference is about 0.4%. In addition, the diaphragm tank natural frequency calculated was found to be close to the glycerine natural frequency obtained at 60% fill level. The future research will continue toward modifying the SimMechanics model to include the diaphragm in the system. There are several parameters to be considered due to the diaphragm effect on the overall slosh behavior."}, {"section_title": "CONCLUSION", "text": "Liquid sloshing in moving containers remains of great concern to aerospace applications like spacecraft and rocket missions. By extending the parameter estimation techniques previously developed to include the presence of a diaphragm, a greater number of real life missions can be analyzed. The on-going research will allow for earlier and easier identification of potential vehicle performance problems. This collaboration between NASA's Launch Services Program, Embry-Riddle Aeronautical University, Southwest Research Institute and Hubert Astronautics has led to a deeper understanding of the slosh issues confronting the spacecraft and launch vehicle community and enabled the development of these new approaches to predictive simulation."}]