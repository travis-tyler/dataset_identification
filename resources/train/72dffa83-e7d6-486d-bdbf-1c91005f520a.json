[{"section_title": "", "text": "LOSHING experiments using cryogenic liquid nitrogen, executed at the Centre of Applied Space Technology and Microgravity (ZARM) in Bremen, Germany, were simulated numerically using a computational fluid dynamics (CFD) program based on the volume-of-fluid (VOF) method and a single-temperature-per-cell approximation. In contrast to sloshing of storable liquids (a fluid that is in the liquid phase at room temperature and pressure), sloshing of a cryogenic liquid introduces important thermodynamic effects in addition to the dynamical aspect of a sloshing motion. The dynamic behavior of a sloshing liquid has been extensively studied [1] , whereas the thermodynamic aspects have not been the subject of many studies and are not understood well. Therefore, the focus of the experiments and simulations is on these thermodynamic aspects.\nIt will be shown in this Note that codes using the previously mentioned methods are not able to simulate the thermodynamic aspects of such experiments accurately, and it will be explained why that is the case."}, {"section_title": "II. Experimental Setup", "text": "The experiments involve a tank that is filled with liquid nitrogen at ambient pressure. The cylindrical part of the tank has a radius of r 0:145 m. The tank is filled to height H 2r. The tank is closed such that there is no contact of the inner part with the surroundings. Five temperature sensors are located in the liquid at heights of 0.003, 0.103, 0.203, 0.253, and 0.278 m with respect to the tank bottom. Two parallel sensor booms with 4 temperature sensors each are located in the ullage. Temperature sensors are located at 0.334, 0.384, 0.434, and 0.484 m with respect to the tank bottom, thus providing two temperature readings at each height but at different radial locations. A single pressure sensor is used to measure the pressure in the tank. The test setup is illustrated in Fig. 1 . More detailed descriptions of the test setup can be found in [2] .\nBecause of unavoidable heat leaks from the surroundings into the closed tank, the pressure will increase. During this period of selfpressurization, thermal layers will form in the liquid and ullage gas. After a certain increase in pressure the tank is excited laterally, causing the fluid to slosh. A crank shaft introduces the lateral excitation of the tank. The first natural sloshing frequency occurs at f 1:8 Hz, which can be determined from [ \nTo avoid chaotic sloshing near this frequency but still have significant slosh wave amplitudes (about 0.03 m or about 10% of the tank diameter), an excitation frequency of 1.4 Hz is chosen and the excitation amplitude is set to 0.01 m. This results in a well-defined planar slosh motion with gravity waves. During sloshing a pressure drop occurs and the thermal stratification in the liquid is partly destroyed. Similar experiments are rare and as such the phenomenon is not fully understood. Models describing the phenomenon need to be developed further. Similar experiments were carried out by Lacapere et al. [4] using liquid nitrogen (LN 2 ) and liquid oxygen (LOX), by Moran et al. [5] using LH 2 , and by Das and Hopfinger [6] using the liquids FC-72 and HFE 7000. Das and Hopfinger conducted their experiments in both the stable and unstable slosh regions near the eigenfrequency of the system. Measured pressure drops showed a clear dependency on the sloshing dynamics, where the chaotic sloshing in the unstable region resulted in much higher pressure-drop rates. Pressure-drop rates varied from 4.2 to 0:25 kPa=s, total pressure drop varied from 88 to 18 kPa. All experiments had an initial pressure of approximately 200 kPa. Moreover, Das and Hopfinger showed in their experiments that condensation of ullage vapor during sloshing is the main mechanism for explaining the pressure drop in the system. Moran et al. [5] performed experiments over a wide range of slosh frequencies and slosh wave amplitudes, resulting in a wide range of pressure responses of the system, also clearly showing that the pressure behavior depends on the sloshing dynamics. In these experiments initial pressure was either 250 or 140 kPa. Pressure drop rates varied from 2.7 to 0:48 kPa=s for an initial pressure of 140 kPa and from 17.6 to 0:55 kPa=s for an initial pressure of 250 kPa. Total pressure drop varied from 25.5 to 15.5 kPa for an initial pressure of 140 kPa, and from 121.3 to 31 kPa for an initial pressure of 250 kPa.\nLacapere et al. [4] executed their experiments in the unstable slosh region near the eigenfrequency, resulting in very chaotic sloshing. Pressure-drop rates varied from 14 kPa=s for LOX to 10 kPa=s for LN 2 . Initial pressure was 250 kPa for both cases, and total pressure drop was 100 kPa for both cases. Lacapere et al. also conclude that condensation of the ullage vapor is the main mechanism to describe pressure drop. Figure 2 shows the pressure measured during one of the tests. The pressure increases over time. As soon as the pressure has reached 160 kPa the sloshing motion is initiated. This occurs after 3725 s. During sloshing the pressure drops. Maximum rate of pressure drop is 0:34 kPa=s. The pressure decreases to 134.5 kPa. The minimum pressure is reached after 4420 s, which is 695 s after initialization of the sloshing. According to the ideal gas model, a pressure drop in a gas occurs if the gas temperature decreases, the gas density decreases, or a combination of both:"}, {"section_title": "III. Test Results", "text": "where R is 287 J kg 1 K 1 for nitrogen. The gas density can be obtained by dividing the total gas mass in the ullage through the ullage volume. The ullage volume remains constant thus a decrease in gas density can only be caused by a decrease of the ullage gas mass. In a closed system the only way this can occur is through condensation of the gas.\nThe temperature data obtained in the experiment can be used to determine if a decrease in gas temperature or a decrease in gas density causes the pressure drop. Temperature development in the ullage is shown in Fig. 3 . Temperature increases gradually during the selfpressurization phase. When sloshing starts (at t 3725 s) the temperature at h 0:334 m (the closest to the liquid surface) slightly drops. The temperatures in the other regions stay constant or increase only slightly. The pressure is measured and is homogenous throughout the ullage volume. By approximating the temperature distribution in the ullage using linear functions to fit the measured temperatures, the density distribution in the ullage can be calculated from the ideal gas model. Temperature and density are assumed to be homogenous in the radial direction of the tank. This assumption is justified by the fact that two temperature sensors with different radial locations but at equal heights within the ullage gave similar temperature readings. From the density distribution in the ullage the average ullage density can be calculated. Using this average value of the density, the average temperature in the ullage can be determined by using the ideal gas model again. The results of this procedure are listed in Table 1 , where the subscript av indicates average ullage values.\nIn Table 1 it can be seen that the relative decrease in density is almost 5 times as large as the relative decrease in temperature. According to the ideal gas model, pressure is a linear function of both density and temperature. Because the density in the ullage decreases due to condensation in the ullage, the condensation of the ullage gas has an impact on the pressure, which is almost 5 times larger than the cooling of the ullage. If cooling of the gas alone would be responsible for the pressure drop, it would cause a decrease in pressure of only 4.5 kPa. The condensation of the gas causes a pressure drop of 21.6 kPa. The pressure drop caused by the combination of cooling and condensation is thus 26.1 kPa. This is 0.6 kPa more than the measured pressure drop of 25.5 kPa. The difference can be explained by the linear approximation of the temperature distribution in the ullage to fit the measured temperatures. Figure 4 shows the temperature development in the liquid measured by the sensors. During self-pressurization the temperatures increase steadily. The temperature at the highest sensor (which is located just beneath the liquid surface) shows a much larger increase, indicating thermal stratification in the upper part of the liquid. At t 3725 s the sloshing is started. The sloshing results in a destruction of the stratification in this region and consequently a temperature drop in the upper part of the liquid. The temperature at the liquid surface is reduced, and thermodynamic equilibrium is broken. The ullage pressure is higher than the saturation pressure belonging to the liquid temperature at the liquid surface and this leads to condensation of ullage gas, resulting in a pressure drop.\nThis condensation procedure is reflected in the phase-change model based on kinetic theory [7] , where the liquid and gas temperatures at the liquid-vapor interface have been assumed to be equal:\nA short analysis of following [7] results in 1. Because p sat l is a function of temperature (the relation between p sat l and the liquid temperature T l can be described, for example, by the ClausiusClapyron equation), it will drop as temperature decreases. Once the thermal equilibrium is broken, the vapor pressure p v will be higher than p sat l . This will result in a negative _ m vap , which means condensation will occur."}, {"section_title": "IV. Numerical Modeling of Sloshing Including", "text": "Heat and Mass Transfer"}, {"section_title": "A. Numerical Model", "text": "The experiments were simulated using a CFD program based on the VOF method for the interface tracking and a single-temperatureper-cell approximation. Simulations were started at the beginning of the sloshing (t 3725 s in the experiment). Initial conditions of the simulations, such as temperature distribution and pressure, were taken from the experiments. The experiments were modeled as an adiabatic system, i.e., no heat enters or exits the tank. Three different mesh resolutions were tried to investigate mesh dependency. Symmetry along the y-z plane was taken into account, reducing the necessary cells by a factor of 2. The lowest mesh resolution consisted of 29,250 cells (30 15 65). Cell number was increased by a factor of 3.5, yielding a 101,430-cell mesh. The highest mesh resolution was obtained by again multiplying the total number of cells by 3.5, yielding a total of 351,000 cells. Slosh motion was introduced by applying acceleration in the x-axis direction by tabular input. The tabular values were taken from acceleration values measured during the experiment. Figure 5 shows the results of this analysis. All cases give unsatisfactory results in the simulation of the pressure development. The coarse 29,250-cell mesh yields the biggest error in pressure development. The mesh with a higher resolution (101,430 cells) yields a slight improvement. By again increasing the number of cells 3.5 times (351,000 cells) almost no improvement is visible anymore. The result has converged, and the predicted pressure drop is too strong compared with the experimental results.\nAs discussed in the previous section, a pressure drop can be caused by a decrease in ullage density, in ullage temperature or a combination of both. In the experiments, density decrease caused by condensation has been shown to be the most important factor. Temperature decrease in the vapor is of little importance on the pressure development.\nTo investigate what causes the pressure drop in the numerical simulations, the phase-change model was switched off. By switching off the phase-change model, the average density in the ullage must remain constant. This excludes the possibility for a pressure change due to changes in the ullage density. In addition, the heat conduction coefficients of the liquid and vapor were set to zero, and no heat exchange was allowed between the liquid and vapor. Because there is no heat transfer between liquid and vapor and the system is modeled adiabatically, the average temperature in the vapor should remain constant. A pressure drop due to temperature decrease in the ullage is therefore also ruled out. Pressure in the system should remain constant during sloshing. But in Fig. 5 it can be seen that with these settings, a pressure drop is still present. By taking a look at Fig. 6 , where numerically predicted ullage temperature is plotted, it can be seen that temperature in the ullage according to the numerical model drops. This numerical cooling of the ullage vapor leads to an unphysical pressure drop in the system. The cause for this temperature drop was found to be a numerical error introduced by the numerical methods used in the software, which will be proved in the next sections using a simple 1-D case. "}, {"section_title": "B. Limitations of the Numerical Method Used", "text": "It will be shown here that all CFD programs based on the VOF method for the interface tracking and a single-temperature-per-cell approximation will fail in simulating such kinds of experiments. \u2020 The VOF function defines the fraction of fluid F present in a cell. It is 1.0 if fluid 1 completely fills the cell and 0 if fluid 1 is completely absent in the cell:\nFluid properties in a cell are calculated using this fluid fraction F. The internal energy per unit volume of a cell is calculated as follows:\nThe average temperature T in a computational cell is calculated such that the internal energy is conserved:\nFrom this equation it can be seen that if one fluid is much heavier than the other, the temperature in the cell will tend to the temperature of the heavier fluid. This degrades the accuracy at which the temperature of the other fluid is represented. It can also lead to large errors in the temperature when a flow is present. This is exactly what happens at the liquid-vapor interface in the CFD model.\nTo illustrate this, a simplified one-dimensional slosh model is considered (see Fig. 7 ). First, a basic mass balance using the continuity equation is set up for fluid 1 flowing into cell B, taking into account that there can only be flow along the z axis. This results in Eq. (5):\nwhere V ui vj wk is the velocity vector and dS is a vector elementary area normal to the surface. Assuming that the fluid is incompressible, i.e., 1 constant, results in xy 1 wj z0 1 wj z0z 0 which yields Eq. (6):\nThe mass of fluid 1 that enters cell B is expressed by\nwhere A is the surface area between two adjacent cells. The volume entering cell B is then found by Eq. (7):\nThe fractional volume that flows into and out of fluid cell B can be expressed by\nIf fluid 2 is also assumed to be incompressible, the volume flowing into and out of cell B will be equal: As shown in Eq. (4), the temperature in a cell is averaged such that internal energy is conserved. To shows that this can lead to errors, the following analysis will concentrate on the internal energy only, neglecting heat conduction and kinetic energy. The internal energy transported into and out of a cell is\nwhere\nIn the initial case that F A 1 and F B 0, the fluid fraction in cell B changes according to Eq. (11):\nThe internal energy in cell B changes according to [using Eqs. (3) and (10)]:\nBy applying Eq. (12) the new temperature in cell B can be calculated:\nThe equations above can be used to make an error estimation of the single-temperature method.\nFor a worst-case error analysis it has to be assumed that\nUsing Eqs. (12) and (13) and substituting the new values for the worst-case error analysis, the new temperature in cell B can be calculated:\nIf fluid 1 is a liquid and fluid 2 is a gas, then for most cases 2 c 2 = 1 c 1 1. For nitrogen this ratio is about 0.003 at 1 bar and T 2 90 K. The ratio gets even smaller for higher T 2 . Because the ratio is so small it is possible to take the limit of Eq. (14) of 1 c 1 ! 1. By assuming that @V fr is not too small this results in Eq. (15): Fig. 9 Temperature error in a cell caused by cold liquid that flows into cell with hot gas; fraction of fluid (top) and resulting temperature (bottom). Time increases from left to right."}, {"section_title": "Situation 1", "text": "If the flow is then reversed (as is the case for sloshing) and fluid 1 disappears from cell B, then using Eqs. (12) and (13) the new temperature in cell B can be calculated:\nthis results in Eq. (17):\nAfter the back and forward fluid motion, cell A still has its initial temperature T 1 and cell C still has its initial temperature T 2 but cell B has a temperature that is an average of the two. In the absence of heat transfer between the fluids, the temperature in cell B should be its initial temperature.\nIf the slosh motion is repeated, the error in cell B will get even bigger and the error is spread to the neighboring cells. The longer the slosh time and the more back and forward fluid motions take place, the bigger the error gets. Because pressure is a function of temperature this will result in unrealistic pressure changes."}, {"section_title": "Situation 2", "text": "If the flow is not reversed but instead again a volume @V fr flows from cell A into cell B and assuming that 2@V fr < 1 in cell B so that only fluid 2 flows into cell C, the new temperature in cell B will remain at T 1 T new B , but the temperature in cell C will now change. By using Eq. (14) and knowing that in this case only 2 and c 2 flow into cell C (and as a result 1 2 and c 1 c 2 can be inserted in the equation) the new temperature in cell C is\nThe temperature in cell C should have remained at T 2 , because only fluid 2 has flown into cell C. Because pressure is a function of temperature this will result in unrealistic pressure changes."}, {"section_title": "C. One-Dimensional Numerical Slosh Model", "text": "To demonstrate the problem occurring in the simple 1-D model discussed above, a one-dimensional numerical model is investigated. A two-fluid model is used, with fluid 1 being liquid nitrogen and fluid 2 being gaseous nitrogen. Thermal conductivity in the fluids is set to 0 so that no heat transfer takes place within one fluid or between the two fluids. The phase-change model has been switched off and the entire system is adiabatic.\nThe numerical model is shown in represents a fluid fraction of 0 (fluid 2, gaseous nitrogen). On the right it can be seen that the liquid is much colder than the gas, 77 and 160 K, respectively. Gravity points in the negative z direction, causing the fluid to oscillate around the neutral axis at z 1:5.\nBy zooming in at a cell that is completely filled with gas (F 0) at t 0 and that receives a flow from a cell filled with liquid (F 1), a 1-D analysis of the temperature error can be made. This is done in Fig. 9 . The top row shows the fluid fraction of certain cells at different times. The bottom row shows the temperature in the same cells at the same times. At t 0:0125 s, a small volume of fluid 1 from cell A has flowed into cell B, which previously only contained fluid 2. This causes the fluid fraction to rise from 0 to 0.1. The temperature in the cell immediately drops from 160 to 78.9 K. At the same time, some volume of fluid 2 from cell B flows into cell C. Because the fluid that flowed into cell C has the same temperature as cell C, no temperature change in cell C is present. At t 0:01875 s some more fluid from cell A flows into cell B, further increasing the fluid fraction in cell B. At the same time, some of fluid 2 from cell B flows into cell C. Because now the fluid 2 that flows from cell B has decreased in temperature, cell C also decreases in temperature. The temperature in cell C drops from 160 to 159 K. This temperature drop of 1 K is to small to be visible in Fig. 9 . At t 0:0298 the previous cycle is repeated, but now the temperature in cell C has dropped from 159 to 155 K, which is clearly visible in the figure.\nThe temperature drop in cell C should not be present at all, because it consists of only fluid 2. This example illustrates the temperature error due to numerics very well and has been described mathematically in Sec. IV.B by situation 2.\nAs time increases the error spreads through the complete system. Figure 10 shows how the temperature develops throughout the gaseous volume of the system. After 10 s the maximum temperature in the gas is 148 K. The average temperature in the gas is even lower. The error in the temperature after 10 s is therefore more than 12 K. Because pressure in the system is determined as a function of the temperature (by using the ideal gas model), the pressure in the system also decreases, as can be seen in Fig. 11 . The pressure has decreased from atmospheric pressure (0.103 MPa) to less than 0.8 MPa. This is an error of more than 20%."}, {"section_title": "D. Possible Solutions for the Error", "text": "FLOW Science has proposed two possible solutions to the problem. One is to move completely away from using a single temperature per cell. Two temperatures would be used in each cell, one for the temperature of fluid 1 and the other the temperature of fluid 2. Accordingly, two internal energies would have to be calculated in each cell to represent each fluid. An additional term accounting for the heat transfer between the two fluids would also have to be added.\nA second, simpler approach could also be taken. In this case, the single-temperature approach would be maintained, but the advective calculation would be modified. By assuming that in any cell containing both fluid 1 and 2, the mixture temperature is dominated by the liquid in the cell it therefore should not be used for computing internal energy flowing into the cells that contain only gas. The internal energy of gas that flows from a cell containing liquid into a pure gas cell would have to be modified to avoid using the liquiddominated temperature in the donor cell, for example, by using the acceptor cell temperature.\nAs soon as the flow is reversed and when the liquid has completely flown out of a cell and replaced by gas, the cell temperature would have to be reset to a representative gas temperature (for example, using the temperature of its fully gas neighbors), because the old liquid temperature is not representative of the newly entered gas."}, {"section_title": "V. Conclusions", "text": "A numerical code based on the volume-of-fluid method and a single averaged temperature in a computational cell does not accurately describe temperature developments in two-fluid systems, which are subjected to fluid motion and in which temperature regions within the fluids exist. This is the case, for example, in a system in which a thermally stratified cryogenic liquid is subjected to a sloshing motion. The predicted rate of pressure drop in the system will be too high, due to artificial cooling of the ullage gas. The user must be well aware of this problem before applying numerical codes to cryogenic sloshing problems or similar cases.\nR. Kapania Associate Editor AIAA JOURNAL, VOL. 49, NO. 12: TECHNICAL NOTES"}]