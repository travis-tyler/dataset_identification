[{"section_title": "Abstract", "text": "This paper studies the sensitivity of estimates on various assumptions about aggregation in modeling the school's e\u00a4ect in child educational production. Building a structural model to control the endogeneity of school qualities in the production function, the authors uses Monte Carlo simulations to evaluate the performance of a \"correct\" aggregation educational production model versus simple aggregation educational production model in estimating school resources'e\u00a4ect on academic outcome. Comparion of both speci\u2026cations to the benchmark model without aggregation shows that the simple aggregation of school resources over a geographic area causes serious speci\u2026cation errors, and thus generate biased estimates for the marginal contribution of the school resources to test scores. Fortunately, such biasedness can be minimized by using the \"correct\" aggregation speci\u2026cation."}, {"section_title": "Introduction", "text": "Research on the estimated e\u00a4ect of additional resources to local schools has direct implications for tax policies and government budgets. If school NIH/NICHD grant (1R01HD047213) provides partial support for this research.We thank Palmetto Cluster at Clemson University, Ithaca and Hokieone Cluster at Virginia Tech. for their help to run large Fortran jobs crucial to the success of conducting this research.\npolicies are undertaken with a biased estimate of school inputs, they can cause an enormous waste of society's resources. For example, it is mentioned in Hanushek (1997) that pupil-to-teacher ratio has been found as a major force driving student outcome, which leads the average pupil-to-teacher ratio in US public schools to fall from 28 percent to less than 16 percent over the 1940 to 1990 period. Even with this drop in the pupil-to-teacher ratio, the test scores of primary and secondary school students show no improvement across the nation during this time period.\nIn studying the e\u00a4ect of schools on educational reform, the literature inputs a wide range of e\u00a4orts. According to a recent review by Hanushek, Rivkin and Taylor (1996) , there were 277 separate investigations of the school quality indicator: pupil-to-teacher ratio, and 163 studies about one of the other quality measure of schools -expenditure per pupil. Endless research e\u00a4orts notwithstanding, little consensus has been reached about the magnitude or even the direction of the school's role in a child's education.\nSome studies in school performance yield a simple conclusion that there is no strong or consistent relationship between school resources and student performance (Childs and Shakeshaft (1986) , Glass and Smith (1979) ). Conversely, the widely publicized \u2026ndings of Card and Krueger (1990) , together with several other studies (Johnson and Sta\u00a4ord (1973) , Link and Ratledge (1975) , Rizzuto and Wachtel (1980) ) indicate that variations in school resources are related to returns to education.\nTo explain the discrepancies of \u2026ndings about school e\u00a4ects, several studies proposes a number of reasons. Firstly, Todd and Wolpin (2007) posit that most of the previous estimations of the child educational production function failed to accommodate the fact that educational policies and household behavior interact to determine student outcomes. The positive raw correlation between school spending and test outcome disappears when family background is controlled in the estimation. Secondly, Heckman, LayneFarrar and Todd (1996) points out that endogeneity biases take e\u00a4ect when there are correlations among the di\u00a4erent inputs from school, family, and student preparations. For example, parents make systematic school choices through migration, meaning that \"good\" parents self-select themselves into better school districts. This belief confounds the task of sorting out the school's e\u00a4ect from the parents' e\u00a4ect. Thirdly, Loeb and Bound (1995) 1 , and Hanushek et al. (1996) show the importance of data characteristics in explaining the con \u2021ict in the \u2026ndings of school e\u00a4ectiveness studies. They point out that signi\u2026cant positive school e\u00a4ects frequently appear in educational outcome studies using aggregate data, while strong school e\u00a4ects are not found when micro level data are used. As suggested in Hanushek et al. (1996) , aggregation can alter the magnitude of omitted variable bias and implies upward bias of estimated school resource e\u00a4ects.\nThis paper set up a structural model to simultaneously address the endogeneity problem of school choices together with the aggregation problems in measuring school resources. Folding the migration decisions of parents into the child educational production function, we specify a random parameters model for the collective decisions about school choices and parental input -i.e., in the joint estimation of school choices and the educational production function, we allow the educational outcome to depend on the same unmeasured family preference factor that a\u00a4ects the family's school choice. Parents are assumed to choose a school district based on the quality of that particular school district, and student outcome is achieved based on the quality of the chosen school district. In order to show the aggregation bias caused by assuming both the location choice outcome and student outcome are based on the school qualities aggregated to the county level, we compare our \"correct\" aggregation model with a simple aggregation model in a Monte Carlo study based on school district information extracted from 1994 Common Core of Data 2 . We \u2026nd that the widely used production function model with aggregated resources can cause serious speci\u2026cation errors that increase the endogeneity bias. We experiment with di\u00a4erent assumptions about the heterogeneity pattern of the unobserved preference factor on the three models and \u2026nd that speci\u2026cation errors generated by simple 1 Loeb and Bound (1995) found large school e\u00a4ects using division level aggregation data. They argue that the di\u00a4erence in data characteristics could crucially a\u00a4ect estimation \"more than the di\u00a4erences in outcome measures or biases from labor market in \u2021uences\".\n2 Survey conducted by National Center for Educational Statistics (NCES).\naggregation can be overcome by \"correctly\" aggregating the resources over a geographic area.\nThe paper is organized as follows: Section II provides a brief review of the relevant literature. Section III lists the three di\u00a4erent modeling speci\u2026-cations of the joint distribution of school choice and educational production function, and section IV applies the three models to a Monte Carlo experiment. Section V provides concluding remarks."}, {"section_title": "Background", "text": "Early studies of school e\u00a4ectiveness, e.g. Oates (1969) and Kain and Quigley (1970) focus on the linear relationship between school resources and child educational achievement or local housing value outcomes 3 . This group of studies, which is recognized as \"hedonic pricing\" model or \"linear test outcome projections\", has a number of shortcomings. The \u2026rst is related to the fact that school inputs and family inputs are both important factors a\u00a4ecting child academic achievement. Estimations of school e\u00a4ects could be severely biased if there is no control for family background, the models implicitly assume that the marginal impact of school e\u00a4ects is the same across all socioeconomic background or academic skill of the students. The second problem proven to be more crucial in the estimation arises from the fact that school input and parental inputs are inter-correlated. The school resources a child is receiving is endogenous because they are not \"given\", but \"chosen\" by his/her parents through sorting on locations. Tiebout (1956) and Bayer (2000) emphasizes the importance of the systematic location choice of families and the possible impact of that on the performance of the family members. This unobserved preference factor is quite important, as it not only a\u00a4ects location choice of the family, but also a\u00a4ects the choices concerning their children's education, including choices among various complementary programs that aid in the learning and choices of helping children with their daily studies.\n3 Studies of housing values shows that school inputs have been capitalized into housing price (Blackburn, Bloom and Freeman (1991) ). Hanushek et al. (1996) use a linear model under omitted variable and measurement error assumptions to demonstrate that the aggregation of all school characteristics to the state level in the production function unambiguously bias the schooling parameters upward if some of the state level impact factors are omitted in the estimation. For example, some states may improve teacher competence regulations that ensure the better quality of teachers while maintain the same state average key school quality metrics 4 .\nThe estimated e\u00a4ects of schools would undoubtedly bias upwards if the teacher competence regulations are neglected in the estimation. Hanushek et al. (1996) highlighted the reasons why a perfect control of between-state school characteristics variations is hard to achieve: Schools in the United States are organized by di\u00a4erent states and counties and thus follow di\u00a4er-ent types of policies depending on state resources/preference. For example, \"Some 37 states have forms of teacher competency testing, while others do not, and details about the requirements for teachers vary a lot\", \"Policies are di\u00a4erent across states for teacher tenures\", \"States also vary in terms of requirement for graduating with high school diploma\". While controlling for these unmeasured factors is di\u00a2 cult, these unmeasured state regulatory heterogeneity bias the estimates upward to a certain level.\nBy jointly modeling the location/school choice of parents and the student outcome, our analysis has a number of advantages Firstly, it emphasizes the importance of the endogeneity of school characteristics on the estimation of the e\u00a4ect of schools on student academic achievement. Since parents valuing better schools raise the other (unmeasured) parental inputs to their child's education, the unmeasured family preference on school choice a\u00a4ects the student test outcome. Secondly, this model has the ability to account for the local/state level unobserved school quality indicators since families look at both the observed (e.g., pupil-to-teacher ratio, teacher salary, dropout rate, etc.) and unobserved (e.g., state regulations on teacher competency test, etc.) factors when choosing a school district for their children. With this endogeneity issue controlled for in the model, we access the performance of di\u00a4erent modeling speci\u2026cations (aggregated versus disaggregated) on the estimation of child educational production function. While studies usually focused on county level or state level measures of schools, we suspect that parents in their decision making almost certainly focus on school characteristics at a \u2026ner level of geographical detail. We explore a plausible modeling speci\u2026cation that \"correctly\" aggregates school resources over particular geographic areas when exact school choices of parents are unknown in the study. This model successfully deals with two aspects of aggregation bias in the typical examples of school e\u00a4ective studies: 1) the bias caused by the aggregated local public goods that a family is comparing from the choice set when they make their residential decision.\n2) The bias caused by linking the aggregated school resources to an individual in the educational production function."}, {"section_title": "Modeling Speci\u2026cations", "text": "The model follows a simple time line: at the \u2026rst stage, parents make a school choices based on the local o\u00a4er of public goods. At the second stage, the student's educational outcome is achieved based on the quality of schools, family background and other preparation factors. The aim is to control the non-random sorting of households across locations and schools, and correctly aggregate the district information if aggregation over a certain geographic region is required."}, {"section_title": "Full Location Information Model", "text": "Families are assumed to make their location choices within a school district's boundary. Each family with a child over the age of \u2026ve is faced with a choice from all school districts in the United States. Since about 34% of US counties contain more than one school district, consider the following model. Suppose that the nation has K counties where k = {1; :::; K}. For each k labeled county, there are J k school districts where each school district can be described as j k ={1; :::; J k }. Families make a location choice within a typical school district. In particular, they consider the school quality of the destination j k , the expected income from the location, which is idiosyncratic to the parents'characters, and the travel distance between the current location of the family and the possible location from the choice set (Z i;j k ). There is also an unobserved preference factor, i , showing how much the parents care about the school qualities, that a\u00a4ects the decision. The expected utility of choosing each location is speci\u2026ed as:\nAssuming the error term \" i;j k follows an i.i.d. extreme value distribution, the possibility of this family i choosing school district j k for their children, controlling the unobserved preference factor i speci\u2026c to the family, is speci\u2026ed as a standard conditional logit formula:\nThe test score outcome for the children is achieved conditional on the chosen school district's qualities. Therefore, the student outcome is a function of the characteristics of the quality of school his/her family chooses ( i;j k ), personal speci\u2026c characteristics and student preparations (X i ) such as the age and race of the child, the mother's AFQT score, the mother's working status, and the same family speci\u2026c preference factor ( i ) that affects the utility function (Equation 1). For example, parents who care much about the academic performance of the children reside in their best a\u00a4ord-able school district. At the same time, they spend as much time as possible helping their children with homework and improve the test score outcome.\nAssuming error term i follows an i.i.d. normal distribution, the likelihood of observing an achieved test score can be speci\u2026ed as the standard normal distribution formula conditional on the unobserved heterogeneity factor i :\nFrom simple probability theory, the joint distribution of achieving student outcome and choosing the school district can be written as the product of Equations 2 and 4 if heterogeneity factor i is observed. However, i is unobserved, making school characteristics endogenous in the above child educational production function (i.e., the unmeasured factors that a\u00a4ect the location choice of the family could also a\u00a4ect the student test outcome).\nWe use a random parameters speci\u2026cation for the utility function determining the optimal school choice ( j k ) and the production function deter- We specify a linear utility function that links school quality indicators j k and location speci\u2026c characteristics idiosyncratic to each family (Z i;j k ) to the family's utility. So that Equation 1 can be rewritten as:\nNote that in this utility function speci\u2026cation, parents are di\u00a4erentiated in terms of their attitude on how important schools are to the educational outcome.\nIn the child educational production function (Equation 3), test score is assumed to depend linearly on the chosen school characteristics ( j k ) and X i , while the family preference factor also contributes to the test outcome:\nThe parental preference over school characteristics could also be an unobserved input to the child educational production function.\nAfter controlling for the common factor i in both the utility and the production function, we assume the two error terms \" i;j k from 5 and i from 6 are mutually independent. The unconditional likelihood function can be obtained by integrating over the distribution of the common factor i . With \u2026nite supporting points for the distribution (h = 1; :::H), we discretely approximate the true likelihood function by specifying the following likelihood function:\nIn equation 7, Pr( h ) is the probability of observing the preference factor having the value h . Assuming the exact school choice of the family is known, this is what we call the Full Location Information Model and it will serve as the benchmark of comparison of the following two models under aggregation assumptions."}, {"section_title": "Correct Aggregation Model", "text": "If the data contains information about the exact school district choices, then the Full Location Information model can be implemented empirically.\nHowever, due to data limitations on nationwide school choice studies like this one, economists frequently need to aggregate school resource data into some higher level to enter into the production function. For example, because of the con\u2026dentiality concerns from the NLSY national survey, we only know the county where the surveyed family is located. Under this circumstance, there are two pieces of information missing from the full location information model. First, only the county of residence of the child is known to the researcher, not the exact school district; second, while we do observe the test score for each child, we can not link the exact school input the child receives to the test outcome. To follow this reality, we assume the family considers the optimal school district characteristics to make a location choice so that the county choice is the sum of the probabilities of choosing each school district within the county. To obtain the probability of observing a chosen county of residence and a child's test score outcome, we integrate\nNote that in this speci\u2026cation 8, school quality information is detailed at the school district level even though it is not directly linked to a student in that district. Under discrete heterogeneity assumptions about the unobserved preference factor , if estimating both the possibility of choosing the county of residence and achieving the test score conditional on the chosen county we model, the likelihood function of observing the chosen county and test score can be written as:\nThis model is speci\u2026ed di\u00a4erently from the Full Location Information Model, but is derived directly from Equation 7. This model is a summation of joint probabilities of observing the chosen county and the test score within each county. Even though only one test score is observed and location choice is known at the county level, this model maintains as much information as possible by using school district level quality information and \"correctly\" speci\u2026es the family's incentive to move. This property of the model is consistent with the individually observed Full Location Information Model presented in the last section. It should yield estimations with less bias than the commonly used simple aggregation model we are about to discuss in the next section. Thus, we call this model the \"correct\" aggregation model."}, {"section_title": "Ad Hoc Simple Aggregation Model", "text": "When location choice is partially observable to the researcher, the simple aggregation model conveniently assumes that a family makes their county choice through considering the county level average school qualities. The child educational production function inputs will be simply aggregated to the county level. This is a widely used method in the literature and is served here as a substitute for the \"correct\" aggregation model.\nSimilarly, assuming the errors are i.i.d. extreme value distributed, the probability that person i choosing county k is a function of the average school characteristics in county k and other factors idiosyncratic to the person and location (dependent on the preference factor) can be speci\u2026ed as:\nNote that aggregation causes some information loss for the production function through the loss of the variations in k .\nTest score outcome, similarly, is based on the average school quality of the chosen county k along with other background factors (X i ) of the student. Therefore, the likelihood functions for the aggregation case can be written by specifying a discrete approximation of the distribution of the unobserved heterogeneity: "}, {"section_title": "Data Generation Process in Monte Carlo", "text": "This section details the data generation process in the Monte Carlo Study for the comparison of the models. To best approximate the geographic distributions of labor markets and the quality of school districts across locations, we extract a sample of school districts that best matches with the distribution of school districts across US counties. We also obtain a mean wage measure for each of the counties in the sample to serve as an exogenous factor impacting the parents' school district choices (Z i;j k in Equation 5). To approximate the student preparation in the test score function, we generate the \"previous period math score\" outcomes based on the distribution of 1992 PIAT math score from the National Longitudinal Survey of Youth (NLSY) serving as the control variable X i in the educational production function (Equation 6). In the data-generating process, we speci\u2026ed a number of distribution assumptions for the unobservable heterogeneity factor i , to accommodate the fact that the distribution of this factor can be rather arbitrary in the real world. Details come in the last section. For each distribution assumption we generate 100,000 observations to approximate the asymptotic characteristics of the data."}, {"section_title": "Data Generation for Location Choice Outcomes", "text": "School district characteristics considered to be the major factors a\u00a4ecting the utility function of families are Pupil-to-teacher ratio, Expenditure per Pupil and Dropout Rate, all at the school district level. We obtain these three measurements of the school quality from the National Center for Education Statistics (NCES) survey Common Core Data \u2026les (CCD) for year 1994 5 .\nWe use the 1990 Census Geo\u2026les 6 to get the geographic occupation of these school districts and match them into their prospective counties. Figure 1 shows the distribution of school districts among US counties in 1994. 95 school districts where the pupil-to-teacher ratio of these school districts ranges from 8 students per teacher to 21 students per teacher; \"Bergen County\" in New Jersey has 70 school districts, and the expenditure among these school districts goes from 1,400 dollars to 9,000 dollars per pupil. 6 The Map has 15,512 local education agencies in year 1994 where 12,920 of the 15,512 are de\u2026ned as the \"Uni\u2026ed\" or primary/secondary school districts that o\u00a4er a degree up to high school diploma. \"Standalone\"school districts account for 3,582 of the total school districts where only partial degrees (not up to 12) are o\u00a4ered. pupil averages at 3934 dollars per student, and overall dropout rate over the \u2026rst to 12th grade ranges from zero to 39.28% per grade, averages at 7.66% per grade. The county average wage is having a mean of $11.26 per hour.\nWe show the division of within and between county standard deviation of all school districts as well. The di\u00a4erence in the standard deviations of all quality indicators shows that the school district qualities are not uniform within counties. For dropout rate, the between county standard deviation is very similar to the overall standard deviation even though this variable experience a lot of variations across individual school districts. This probably shows that the dropout rate has little variations within county. This has a direct impact on the performance of the Ad hoc Aggregation model.\nOther school e\u00a4ects studies mostly have a number of regressors, but we specify the location choice decision to be made upon the Pupil-to-teacher ratio, Expenditure per Pupil, Dropout Rate and the county mean wage. This is to make the comparison of aggregated and disaggregated models more straightforward and to simplify the data generating in the Monte Carlo experiment. For the location choice, the utility function is simulated by the sum of 1) a known part that is a linear function of the above four characteristics, 2) a heterogeneity part (which represents the unobserved family preference factor for school inputs) that interacts with the school characteristics, and 3) error term that distributed i.i.d. extreme value in all choices. More speci\u2026cally, we de\u2026ne equation 5 to be:\nMost previous studies (Loeb and Bound (1995) , and Hanushek (1997)) found the marginal contribution of the three quality factors of schools are in the range of zero to 0.50 for the metrics we study here, so a coe\u00a2 cient scale of -0.5 to 0.5 is used as \"true\" coe\u00a2 cients in this study. We also parameterize the value of in Equation 2 to be 10. The school district outcome is generated as the one that gives the maximum utility from a sorting through the utilities that each location gives according to equation\n1. There are 100,000 families in our sample, all having only one child age 5 to 15."}, {"section_title": "Data Generation for Test Score Outcomes", "text": "We simulate the test score outcome to be the student PIAT percentile math score in 1994 which is mostly used in the empirical study as the indicator of the children's educational achievement. We adopt the value added approach (see Loeb and Bound (1995) ) by controlling for the student's last period (1992) PIAT math score. To best approximate the distribution of real world math performance of children in 1994, the value of this explanatory variable in our sample is an expanded version of the 1992 PIAT math score (values 1-10) of the surveyee of NLSY Child Supplement (There are 2584 data points in that sample, we expand it to be 100,000 via random re-sorting). The generation of test score outcome is based on 1) the chosen (optimal) school district characteristics, and the previous time period PIAT math score, 2) the heterogeneity preference component, and 3) an i.i.d. standard normal random error term. Therefore, we de\u2026ne equation 6 in the Monte Carlo data generating to be:\n+2:5Exp_P upil j k 0:25Dropout j k + 0:5 Pr e_M ath i + 1:0 i + i\nNote that the test score outcome is generated based on the chosen school district's characteristics, the person i's own characteristics, and the unobserved heterogeneity factor, together with the normal random error."}, {"section_title": "Data Generation for Heterogeneity Factor i", "text": "The common factor that appears in both equation 12 and equation 13 is unobservable. To not to lose generosity in the Monte Carlo study, we allow the heterogeneity factor i to follow di\u00a4erent distribution assumptions. We have the following distribution assumptions on the heterogeneity factor:\n1. Discrete distribution with 5 points of support. Each point takes a equal probability for \u2026ve discrete values in the scale 0 to 1. In this distribution, the value of Pr( i ) used in the data generating is a random draw from values 0, 0.2, 0.4, 0.6, 0.8 and 1;\n2. Uniform distribution in the range 0 to 1;\n3. Normal distribution with mean 0 and variance 1. In this distribution assumption. The value of i used in the data generating is a random draw from a standard normal distribution;\n4. Log-normal distribution with mean e 0:5 and variance (e 1 1)e 1 . The value of i used in the data generating is a random draw from this log_normal distribution;\n5. Chi-square distribution with 4 degrees of freedom. The chi-square distribution has mean = deg rees of f reedom and variance = 2 deg rees of f reedom.\nWe normalize the scale of the value of i to fall in (0,...,1), and the variance of the disturbance of the function (either 12 or 13) to be 10. To do this, we are setting the fraction of the total error variance that is due to heterogeneity to be 0.3, and 0.7 is due to the normal (or gumbo) error i . we \u2026rst normalize both error components so they are variance 1, then de\u2026ne a weighted sum of these two variances so that the whole variance of the disturbances is 10 (std=10).\nThe number of observation in our sample is 100,000. The number of school district in the choice set is 872 districts in 200 counties. For each model to consider comparison, we generate 100 sets of random outcomes depending on the distribution of the heterogeneity factor listed above, the results are based on the 100 repeats of the same estimation process for each model."}, {"section_title": "Parameterization and Optimization Process", "text": "There are several di\u00a2 culties in estimating parameters in the quasi-maximum likelihood factor models like this one (see Mroz (1999) ). The \u2026rst di\u00a2 culty involves the parameterization and the estimation of the heterogeneity factor i . One can choose to impose the \"uniform\" distribution that all heterogeneity points have an equal share at the range of [0, 1] . But letting the data decide the shape of the heterogeneity distribution, and estimate both the location and the scale of the points might be much better for real world problems. In this study, we parameterize the points of support and the probabilities for the discrete factor approximation estimation of the structural model.\nSuppose we chose H points of support for the approximation of this rather continuous distribution of family heterogeneity. In this case, imagine there are H di\u00a4erent types of families in the country, each type would have a di\u00a4erent opinion on the importance of school inputs to their children's educational output on a scale of 0 to 1. It is possible for a family to fall on any of the h point h . We restrict the h 's to lie on [0,1], with 1 = 0 and H = 1. For this purpose, for the values of points in between we use standard logit to obtain the sub optimization over the h 2 parameters :\n; h = 2; :::H 1\nFor the probability of each point of support for h , we consider the constraint that those h probabilities have to sum up to 1. Also each probability has to be non negative. We use an easy parameterization as the following to satisfy these two constraints. De\u2026ne:\n; f or h = 1; 2; ::H 1 1 + sin( P H 1 h 0 =1 h 0 ); f or h = H and let\nIn the maximum likelihood estimation with H = 5 points discrete support, we obtain 3 estimations for h ; h= 2, 3, 4 and 4 estimations of Pr( h ); h= 1, 2, 3, 4. According to equation 5, for the utility function we have the marginal contribution of j k to the probabilities of the family choosing a particular school district should be an average of 2 ( i ) across all estimated points of support for the unobserved discrete factor. For example, in estimating the Full Location Info. Model with 5 points of heterogeneity support in the Monte Carlo, the marginal contribution of the regressor P upil_T eacher j k to the utility function is calculated by:\nSimilarly is true for other parameters in the utility function. Results presented in the next section are simulated marginal contributions in the utility function calculated this way. Another di\u00a2 culty in the estimation of this type of simulated likelihood models, is the fact that a true global maximum is harder to achieve (see Mroz (1999) ). We have put several e\u00a4orts to avoid the local optimums that frequently exists when the number of discrete points is large and the number of parameters grows bigger when one have more regressors: 1). We choose a fairly extensive grid for starting values.\nWe use more than 100 starting values for each optimization problem; 2)\nWe programed the \u2026rst derivatives of the joint likelihood functions (Equation 7, 9, and 11) into the optimization process, so that the optimization is faster with more accurate analytical \u2026rst derivatives to consider in each it-eration, instead of imprecise numerical \u2026rst derivatives that is embedded in the optimization program; 3). We adopt a \"two step\" optimization process to guarantee that the gradient of the \u2026rst order derivatives to be close to zero. For all the models with number of heterogeneity factors >1, we start with 100 random set of starting values for each case, process when the good looking function values are larger than 20. We choose the best 5 out of the 20 good starting values, optimize for 500 iterations for each of the 5 sets of starting values, and choose the one with the largest likelihood function value, save the results as the basis for second round optimization. In the second step, we start by gathering all 100 cases of \u2026rst round optimization results, calculate the function values associated with that case and choose the best 5 function values as the starting value for this second round, and optimize each case for 100 more iterations. Usually this would make the normality of the \u2026rst partial derivatives to be very close to zero. And our experience suggests this is adequate for eliminating most local optima."}, {"section_title": "Monte Carlo Results", "text": "The results from the Monte Carlo evaluations of the three models (i.e., estimations of Equation 7, 9, and 11) are discussed in this section. Since the production function itself (the estimate of marginal contributions of school inputs to the test score outcome) is of concern to most researchers/policy makers, we present the production function estimation results in the \u2026rst section. The second section presents the utility function results."}, {"section_title": "Comparison of Models: Production Function Estimations 6.1.1 i Follows Discrete Distribution with 5 Points of Support", "text": "Although it is more practical to assume the heterogeneity factor i follows continuous distributions, it is undoubtedly true that the discrete factor approximation method works best if the true distribution of this unobserved factor is indeed discrete. Readers would also want to know how di\u00a4erent each model performs, by estimating the likelihood functions using discrete factor approximation method compared with the popular OLS estimation for the educational production function. In Table 2 , we present the mean, variance, and Mean Square Error (MSE) of the production function estimators out of the 100 Monte Carlo cases based on data generation process in Equation 13, and the assumption that i follows discrete distribution with 5 points of support. Each of the 100 cases here is composed of a sample of 100,000 observations to approximate the asymptotic characteristics of the data. The results listed in Table 2 strongly support the superiority of Discrete Factor Approximation method over OLS. Speci\u2026cally, OLS\ngives average estimations further to the true, and higher MSE, for the bench mark Full Location Info. Model. This shows that OLS is not the ideal tool for estimating structural models with unobserved heterogeneity in people's decision making process. Comparing the estimation results for the three models listed at the top portion of Table 2 , it can be seen that the Ad Hoc model gives more biased estimation results, though it has given more consistent estimates over the 100 random cases due to aggregation. Note that the Correct Aggregation Model follows the benchmark model very closely, and the MSE is considerably smaller (about 3 to 4 fold) than that of the Ad Hoc model. Table 3 presents the performance of all three models under continuous distribution assumptions for the unobserved heterogeneity factor i . Although the Ad Hoc Simple Aggregation Model performs poorly compared with the other two models across all the distribution assumptions, which conforms to our expectations, there are some interesting di\u00a4erences in the scale of its MSE across the distribution assumptions and the parameter estimates."}, {"section_title": "i Follows Various Continuous Distribution Assumptions", "text": "Uniform distribution is the one continuous distribution that is most similar to our discrete case ( recall that each of the 5 points takes equal probability in the [0,1] scale for our discrete assumption). Under this distribution assumption, the aggregation model using discrete factor approximation method maintains a MSE of 0.892 for Pupil-to-teacher Ratio, and 0.567\nfor Expenditure-per-pupil. Mean estimates for these two variables are 1%\nhigher than the true value, which shows moderate aggregation bias. However, in other non-uniform, or asymmetric distribution assumptions, such as the Lognormal and Chi-square distribution cases, the simple aggregation gives much more serious MSE with an average estimates sometimes doubles (100%) the true value. It is hard to describe the true world using one distribution, but it could be imagined that the simple aggregation would only perform worse when the error distribution has heteroskedasticity or autocorrelation characteristics, or with a lot of local optima and asymmetry. On the other hand, the correct aggregation model is not a\u00a4ected by the distribution assumptions at all. Its estimates continues to stay closely to that of the benchmark model, and its average estimates for all of the parameters are only 0.1% or 0.2% away from the true value. This \u2026nding strongly suggest the justi\u2026cation of using the correct aggregation model when aggregation is needed and endogeneity bias are present. Drop-out rate is the variable that experiences little within county variations according to Table 1 , which is the main reason that the estimates from the simple aggregation model has a relatively low MSE for this variable. But the mean estimates from the 100 cases is still considerably o\u00a4 the track for drop-out rate using the Ad Hoc model. Table 4 shows the comparison of using discrete factor approximation method versus using conditional logit estimation without endogeneity control. Note that both the full location information model and the correct aggregation models perform well regardless of which method one chooses. This is mainly due to the fact that the heterogeneity factor i does not appear as an independent variable in the utility function, so that the e\u00a4ect of i is achieved through the aggregation of the 5 discrete points. Since each of the 5 discrete points takes equal possibility in the data generating process, aggregating them is not more than taking the mean value. Therefore, using conditional logit method here is asymptotically equivalent to using the discrete factor approximations for the utility function estimations. Even under this extreme condition, the simple aggregation model still yield sizable bias for most of the parameter estimates. The uniform distribution is the one continous distribution that is most similar to the discrete distribution, and the ad hoc model gives estimates 1/3 to 1/4 that of the benchmark model for the variables Pupil-to-teacher ratio and the mean wage. For assymetric distributions like the lognormal distribution and the Chi-square distributions, this model provide parameter estimates that is unrealistically high in magnitude and variances, which is due largely to the inprecise estimate of locations of the heterogeneity points. Note: The mean is calculated using all school districts in the data. The within county standard deviation is an average of the within county std. across all 3130 counties, and the between county standard deviation is the std. of the mean of each county across all 3130 counties. The small di\u00a4erence in the standard deviations of all quality indicators shows that the school district qualities are not unanimous within a county. \n"}, {"section_title": "Comparison of Models", "text": ""}]