[{"section_title": "Abstract", "text": "Abstract-This paper addresses an initial study of a modelfree PID tuning based on simultaneous perturbation stochastic approximation (SPSA) for liquid slosh control. The SPSA method is used to optimize the PID parameters such that the liquid slosh is minimized. In order to validate our model-free design, a liquid slosh model is considered to represent the lateral slosh motion. The simulation results demonstrate that the proposed model-free method has a good potential in reducing the liquid slosh without explicitly modeling the liquid slosh behavior."}, {"section_title": "I. INTRODUCTION", "text": "Nowadays, slosh or oscillation of liquid inside a container often occurs in many cases. For example, ships with liquid cargo carriers are at high risk of generating sloshing load during operation [1] . In the metal industries, high oscillation can spill molten metal, which is dangerous to handle by the operator [2] . Meanwhile, sloshing of fuel and other liquids in moving vehicles may cause instability and undesired dynamics [3] . Hence, it is necessary to suppress this residual slosh induced by the container motion.\nSo far, various attempts in suppressing slosh are based on open-loop and closed-loop approaches. For example, input shaping scheme [4] , [5] and some filtering techniques [6] , [7] are used to generate a prescribed motion, which minimized the residual oscillation. These methods are able to reduce the slosh without needs for feedback sensors. However, these strategies are very poor in handling with any disturbances. On the other hand, closed-loop control or feedback control, which is well known to be less sensitive to disturbances and parameter variations, has also been adopted for reducing slosh. These include PID control [8] , H \u221e control [9] , sliding mode control [10] and iterative learning control (ILC) [11] .\nAs shown in the above, many approaches use model-based control strategies, which are difficult to apply in practice. This is because their control schemes do not accurately consider the chaotic nature of slosh and the complex fluid dynamic motion in the container. Therefore, a model-free approach will be more attractive. On the other hand, a simultaneous perturbation stochastic approximation (SPSA) [12] would provide us a promising tool for the model-free approach. This is because the SPSA method is known to be effective for a variety of model-free optimization problems without require any explicit form of the objective function [13] , [14] . However, it is not clear whether it works for liquid slosh problems since there are a few works in the literature have discussed the application of the SPSA to the problems.\nThis study aims to investigate the effectiveness of the model-free PID tuning for liquid slosh suppression based on simultaneous perturbation stochastic approximation. To evaluate the performance of the proposed model-free approach, a liquid slosh model in [15] which consists of a small motor-driven liquid tank performing a rectilinear motion is considered. Here, the SPSA method is used to tune a given PID controller such that the liquid slosh is minimized while achieving desired cart position. Then, the performance of the proposed method is assessed in terms of level of slosh reduction and cart's position tracking capability.\nThe rest of the paper is organized as follows. Section II formulates the problem of model-free PID controller tuning to slosh control. In Section III, the simultaneous perturbation stochastic approximation based method is explained. Simulation results and discussion are presented in Section IV. Finally, some concluding remarks are given in Section V.\nNotation: The symbols R and R + represent the set of real numbers and the set of positive real numbers, respectively. For the random variable V , the probability of event V = a is represented by P(V = a). For \u03b4 \u2208 R + , sat \u03b4 : R n \u2192 R n denotes the saturation function whose ith element given as follows:\nThe ith element of sat\nwhere x i \u2208 R is the ith element of x \u2208 R n ."}, {"section_title": "II. PROBLEM FORMULATION", "text": "Consider the PID control system for liquid slosh problem depicted in Fig. 1 , where r(t), u(t), y(t), and \u03b8(t) are the reference, the control input, the measurement of lateral \nwhere P i \u2208 R is the proportional gain, I i \u2208 R is the integral time, D i \u2208 R is the derivative time, and N i \u2208 R is the filter coefficient.\nThe performance index for the control system in Fig. 1 is given by\nIn (2), w 1 \u2208 R, w 2 \u2208 R and w 3 \u2208 R are weighting coefficients which are defined by the designer. The matrices P , I, D and N are defined as P :\n. Note that the first and second terms in (2) correspond to the tracking error, while the third means the control input energy. Here, the values of w 1 , w 2 and w 3 are selected in a similar way to the standard Linear Quadratic Regulator (LQR) problem. The limits of integration of the integrals in (3)- (5), i.e., t 0 \u2208 0 \u222a R + and t f \u2208 R + are respectively the upper and lower bounds of the time interval [t 0 , t f ], which corresponds to the period for evaluating the control performance. Then, the model-free PID problem can be described as follows:\nProblem 2.1. For the feedback control system in Fig. 1 , find a PID controller K i (s) (i = 1, 2), which minimizes J(P , I, D, N ) with respect to P , I, D, and N based on the measurement data (u(t), y(t), \u03b8(t))."}, {"section_title": "III. PID CONTROLLER DESIGN BASED ON SIMULTANEOUS", "text": "PERTURBATION STOCHASTIC APPROXIMATION This section presents the main idea to solve Problem 2.1. Firstly, the SPSA algorithm [12] is briefly described. Then, a model-free PID tuning method based on the SPSA algorithm is explained."}, {"section_title": "A. Simultaneous Perturbation Stochastic Approximation", "text": "Consider the optimization problem given by\nwhere f : R n \u2192 R is the objective function and x \u2208 R n is the design parameter. The SPSA algorithm iteratively updates the design parameter to search an optimal solution x * \u2208 R n of (6). The updated law is given by\nfor k = 0, 1, \u00b7 \u00b7 \u00b7 , where a(k) is the gain, g(x(k), \u2206(k)) is the estimation of the gradient at the iterate x(k), which is given by\nIn (8), c(k) is another gain, and \u2206(k) is the n-dimensional random perturbation vector. For example, the gains a(k) and c(k) are given by a(k) = a/(A + k + 1) \u03b1 and c(k) = c/(k + 1) \u03b3 , respectively, for nonnegative numbers a, c, A, \u03b1, \u03b3. Meanwhile, \u2206(k) is, for example drawn from the Bernoulli distribution\nand \u2206 i (k) is its ith component. Note that the convergence conditions of the SPSA algorithm and the guidance to choose a(k), c(k), and \u2206(k) are explained in [12] ."}, {"section_title": "B. Model-Free PID Controller Design", "text": "In this section, the SPSA algorithm in Section III.A. is applied for model-free PID tuning. Firstly, let the design parameter is defined as follows:\nThen, in order to accelerate the design parameter \u03c8 searching, we employ the logarithmic scale to the design parameter by setting \u03c8 i = 10 xi (i = 1, 2, . . . , 8) with the objective function J([10 x1 10 x2 . . . 10 x8 ] ). Finally, our design procedure is described as follows:\nStep 1: Determine the maximum number of iterations k max and let x i = log \u03c8 i (i = 1, 2, . . . , 8) , and select the initial value x(0).\nStep 2: Execute the SPSA algorithm in (7) for the objective function in (2).\nStep 3: After k max iterations, the output x * := x(k max ) \u2208 R i = 1, 2) in the feedback control system in Fig. 1 .\nRemark 3.1. Note that the standard SPSA algorithm in (7) does not always give a stable solution during the optimization process. This is due to a possibility that the design parameters become a very large value and suddenly trapped in an unfeasible region. In order to avoid this problem, we adopt a modified SPSA algorithm, which has been introduced in [16] .\nThere, a saturation function sat \u03b4 (\u00b7) has been used in (7) . That is,\nIn the following part of this paper, the improved update law in (11) is adopted instead of (7)."}, {"section_title": "IV. SIMULATION RESULTS", "text": "In this section, the effectiveness of the proposed model-free PID tuning based on SPSA is demonstrated. Firstly, a liquid slosh model in [15] is briefly described. Then, the SPSA based method is tested to the developed model."}, {"section_title": "A. Liquid Slosh Model", "text": "We consider a liquid slosh model in [15] that performing a rectilinear motion as shown in Fig. 2 . Then, the EulerLagrange equations in y and \u03b8, which produce dynamic equations of the system, is given by\nwhere M , m, l, g, and d are mass of the tank and liquid, mass of the liquid, hypotenuse length of the liquid slosh, gravity, and damping coefficient, respectively. For simplicity, let the measurement outputs of the system is defined by [y(t) \u03b8(t)] := G(u(t)). Then, our control objective is to suppress the slosh angle \u03b8 in a moving tank while achieving a desired position y."}, {"section_title": "B. Numerical Example", "text": "Consider a liquid slosh plant G from the model in Section IV-A. with the system parameters depicted in Table I . Note that these parameters depend on the liquid fill ratio, tank geometry, and liquid characteristics. Here, these parameters have been identified using a quick-stop experiment as reported in [17] . Next, the reference of the cart position is given by\nThe controller K i (s) (i = 1, 2) is the PID controller in a feedback control structure as shown in Fig. 1 . The corresponding design parameters are presented in Table II . Our aim is to find an x \u2208 R 8 , which minimizes the performance index J in (2) for w 1 = 100, w 2 = 100, w 3 = 5, t 0 = 0, and t f = 20. We set the parameters of the SPSA based algorithm as a(k) = 0.005/(k + 24) 0.6 , c(k) = 0.2/(k + 1) 0.1 , \u03b4 = 0.1, and k max = 200. The initial condition x(0) is given in Table II, which is assumed to produce a stable closed-loop system during the evaluation period. Fig. 3 shows the response of the objective function after 200 iterations and Table II shows the resulting design parameter x * \u2208 R 8 . It clarifies that, the SPSA based method successfully minimizes the objective function and yields optimal PID parameters. Meanwhile, the responses of y(t), \u03b8(t), and u(t) are shown in Figs. 4, 5, and 6, respectively. In these figures, the thin grey line represents the responses at k = 0 and the thick black line represents the responses at k = 200, which is the optimal design parameters. It shows that the cart settles to the desired position in about 3 s (see Fig. 4 ) with better liquid slosh suppression. Furthermore, acceptable control input energy (see Fig. 6 ) is used to achieve the control objective. Hence, we can confirm that the model-free PID tuning based on SPSA method has a good potential in reducing the liquid slosh while maintaining the desired cart position."}, {"section_title": "V. CONCLUSION", "text": "In this paper, a preliminary study of a model-free PID tuning based on SPSA method for liquid slosh suppression has been addressed. The proposed method has been tested to liquid slosh model in [15] . The simulation results demonstrate that the model-free PID approach based on SPSA yields a minimal liquid slosh, while achieving the desired cart position.\nIn the future, the applicability of the proposed method for an online model-free approach will be investigated using a motor-driven liquid slosh experimental rig. "}]