[{"section_title": "Introduction", "text": "In late 2019, a sudden new coronavirus (hereafter referred to as COVID-19) swept through Wuhan. Soon the epidemic spread rapidly throughout China. Until June 29, 2020, there were 10 million cases and nearly 500,000 deaths [1] of COVID-19 have now been reported globally. The COVID-19 epidemic has become a major safety and health threat worldwide. One of the key steps to curb the spread of the COVID-19 epidemic is effective screening of suspected infected persons to prevent the virus from spreading further among the population. The most accurate screening method for new coronary pneumonia is nucleic acid detection, that is, reverse transcriptasepolymerase chain reaction (RT-PCR) detection is taken from nasopharyngeal swabs, sputum and other lower respiratory tract secretions, blood, and stool samples [2] . Although RT-PCR testing is the gold standard for COVID-19 screening, RT-PCR testing is a very complicated, time-consuming and labor-intensive process. Not all health institutions in all regions have such testing conditions. At the beginning of the outbreak, the number of RT-PCR detection reagents is very limited. In the background of the global epidemic, some countries and regions still do not have a sufficient number of RT-PCR testing kits.\nAfter the outbreak of the COVID-19 epidemic, the National Health Comission of the People's Republic of China in the \"New Coronavirus Infected Pneumonia Diagnosis and Treatment Program (Trial Fifth Edition)\" [3] Section 4 summarizes the project and its shortcomings, and expounds the outlook for future work;\nFinally section are the references of this paper."}, {"section_title": "2", "text": "Research on COVID-19 imaging diagnosis"}, {"section_title": "COVID-19 imaging features", "text": "According to the description of the imaging diagnosis in the \"New Coronavirus Infected Pneumonia Diagnosis and Treatment Program (Trial Seventh Edition)\" [2] , the chest imaging of patients infected COVID-19 \"In the early stage, there are multiple small patch shadows and interstitial changes, with obvious extrapulmonary zone. Then it develops multiple ground glass shadows and infiltration shadows of the lungs. In severe cases, lung consolidation may occur, and pleural effusions are rare.\" According to the analysis of the recently published literature by Deng et al [4] , milled glass shadow and solid change shadow are the most common imaging signs, and lesion It is mainly located peripherally and subpleurally, along the bronchovascular bundle, and is diffusely distributed in both lungs as the disease progresses. A Normal chest X-ray image has been shown in Figure 1 , and a chest X-ray image of a COVID-19 patient has been shown in Figure 2 , some COVID- In recent years, artificial intelligence, especially deep learning technology, with its powerful data analysis and feature recognition capabilities, has become prominent and clinically recognized in the diagnosis and recognition of lung diseases such as chest X-ray quality control, lung nodule segmentation and detection, and lung cancer screening [5] . The study shows that AI has a sensitivity of 71%, specificity of 95% [6] and far better recognition speed than humans in distinguishing normal from abnormal chest radiographs on CXR image classification.\nIn the middle of the epidemic in China , Alibaba DAMO Academy cooperated with Alibaba\nCloud and then developed a set of new AI diagnostic technology for clinical diagnosis of COVID-19, which can accurately interpret CT images of suspected cases of COVID-19 within 20 seconds and the accuracy of analysis results reached 96% [7] , and the system first landed in Xiaotangshan\nHospital Zhengzhou, China on February 16 for auxiliary clinical diagnosis. The effectiveness and usefulness of AI in medical imaging is evident, providing strong technical support to contain the spread of the epidemic.\nThe current imaging diagnosis of COVID-19 is mostly based on CT images, due to the high rate of misses on chest X-rays for early lesions or predominantly milled glass density changes. The advantages of CT especially HRCT, are its high spatial resolution, freedom from interference from structures beyond the level, and multi-planar, multi-directional display of lesion detail through postprocessing techniques. Xu et al [8] . proposed a 3D deep learning model to segment candidate infection domains from the lung CT image set and further calculate confidence scores using a regional attention mechanism model, capable of accurately screening COVID-19 by lung CT images.\nThe Section 1 in this paper mentions the continued importance of x-ray images for screening for COVID-19, El-Din Hemdan et al [9] . proposed a deep learning classifier framework called COVIDX-NET for diagnosing COVID-19 in CXR, the paper also validated seven different DCNN models such as VGG19 and Densenet201 and found that VGG19 and DenseNet classification performed better. Wang Linda and Wong Alexander [10] presented a deep convolutional neural network named COVID-Net to detect COVID-19 cases from chest X-ray images and analyzed how COVID-Net makes predictions using interpretable methods, in order to gain insight into the key factors associated with COVID-19 cases that can help clinicians perform better screening."}, {"section_title": "COVID-19 CXR Dataset", "text": "As of today, the number of publicly available COVID-19 image datasets remains small. Some middle COVID-19 dataset like Joseph Paul Cohen et al [11] . provide in their paper. \uf06c COVID-19 image data collection [11] \uf06c Figure 1 COVID-19 Chest X-ray Dataset Initiative [12] \uf06c ActualMed COVID-19 Chest X-ray Dataset Initiative [13] \uf06c Chest X-Ray Images (Pneumonia) [14] Special thanks to Joseph Paul Cohen [11] [12] [13] [14] and others for their contributions to the COVID-19\nand pneumonia datasets! "}, {"section_title": "Deep convolutional neural network model in this paper", "text": "Deep convolutional neural network is an intuitive and powerful network architecture in deep learning, and is widely used in pattern recognition and image classification tasks. In recent years, with the further development of deep learning technology, more and more efficient DCNN models have been proposed one after another, like VGG, ResNet, DenseNet, EfficientNet etc. These DCNNs perform well in image classification tasks, making it possible for computers to perform better than humans in visual classification.\nVGG [15] networks only use small convolution kernels and increase the number of network layers to improve the accuracy in the classification tasks. There is no doubt that increasing the depth of the network allows the model to better fit complex data with higher dimensions, and the use of small convolution kernels can greatly reduce the number of parameters. Shallow networks usually have rich semantic information, but VGG does not make the most of this semantic information. where , is the label for sample , indicating that the category of sample is \uff1b , is the probability that sample is predicted to be category .\nIn particular, for one-hot encoding labels in single-label classification problems, the label , for each sample has only one element of one and the rest are zeros, then the loss function becomes\nso the overall loss function is\nwhere , is the probability that sample is predicted to be sample 's actual category .\nTo better evaluate the validity of the model, this project uses a diversity of evaluation metrics.\nFirst of all, the concept of a confusion matrix is first introduced here, and the composition of the confusion matrix is shown in Table 2 . "}, {"section_title": "Optimizer and optimization tricks", "text": "During the training I used Adam, Nadam and SGD optimizers, but finally I prefered to use Adam and it helped obtained a not bad result(see Table 3 ).\nFor CXR images and COVID-19 CXR Dataset, in addition to the data preprocessing and data augmentation methods mentioned in Section 3.2, other optimization methods such as Warmup and label smoothing are also used.\nWarmup is a learning rate warm-up method mentioned by He Kaiming et al [16] . Since the weights of the model in the initial epochs of training are randomly initialized, if using a large learning rate, the model may be unstable. Therefore, I used the Warmup method, using a small learning rate in the first few epochs or steps of the training, and then using the preset learning rate for training after the model is relatively stable, which makes the model convergence speed faster and more effective.\nIn the later stage of training, the loss of the model is reduced to a low level. At this time, if the original larger learning rate is still used, it may cause \"oscillation\". In order to reduce the model gradient to the local minimum as soon as possible, the learning rate should be gradually attenuated(Decay).\nIn combination with Warmup and Decay, I used a three-stage learning rate when training the model, that is, a smaller learning rate is used in the initial stage, and a larger preset learning rate is used in the intermediate stage after the model is stabilized, and at the later stage of training, in order to help the model further converge, a smaller learning rate is used.\nIn view of the obvious overfitting of the model during the training process, I also used label smoothing during training. Label smoothing was first proposed by Szegedz et al [17] . It is a regularization strategy. In Section 3.4 this paper ever introduced the cross entropy loss function for every sample with one-hot encoding label:\n= \u2212 log\ufffd , \ufffd \u2460 after using label smoothing, the one-hot encoding label will add an error term , so the label change\nthe loss function for every sample change to\nwhere is the total number of classification categories, is a small value hyperparameter, and , is the probability that the sample is predicted to be category .\nComparing \u2460 and \u2462, it can be found that after using label smoothing, the loss of a single sample increases, so the global Loss will also increase accordingly, That is, a little penalty is imposed on the model classification, so the model is more robust. If the model want to achieve the loss level as before using label smooth, it must be closer to the global optimal/local optimal. Experimental Results"}, {"section_title": "Experiment device & environment", "text": "The configuration of experiment device is as follows: "}, {"section_title": "Quantitative Analysis", "text": "After training for ten epochs, the evaluation metrics of the training set, test set, and COVID-19\nimages in the test set are shown in Table 3 . Comparing to COVID-19 samples, the model has lower confidence in classfication of the Normal and Pneumonia samples. Table 5 is the confusion matrix of the test set and Figure 4 is the visualization of the confusion matrix, which can partially explain the reason for this situation. Table 5 From Table 5 and Figure 4 , it can be seen that the model has a lot of confusion for the Normal samples and Pneumonia samples, the percentage of misjudgments with each other exceeded 11%."}, {"section_title": "Metrics", "text": "One of the possible reasons is that the class weight setting is too biased towards COVID-19. Using "}, {"section_title": "Qualitative Analysis", "text": "With the help of the TensorBoard it is possible to observe trends in the evaluation metrics throughout the training process, as shown in Figure 5 and Figure 6 . Observing the curve, it can be seen that as the training progresses, the loss function gradually converges, and the accuracy of the model shows an upward trend. However, the accuracy of the model on the training set and the test set has a certain distance, which shows that the model still has\noverfitting. So the model has a lot of space for improvement."}, {"section_title": "Conclusion", "text": "The COVID-19 epidemic situation has not been completely contained, and the adverse effects Loss-Epoch Curve in the test set. This paper can be used by other researchers to conduct more in-depth research based on this paper. I hope to work with other researchers to make small contributions to contain the epidemic and industry development. Finally, I hope the epidemic will end soon and return to normal life!"}]